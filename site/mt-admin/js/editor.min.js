"use strict";function defer_expr(e,t){var n;e()?t():n=setInterval(function(){e()&&(clearInterval(n),t())},0)}function sortArrayByProperty(e,t){return e.sort(function(e,n){return e[t]<n[t]?-1:e[t]>n[t]?1:0})}function AbstractHelperClass(){}function HelperDragHoverClass(){this._templates={base:{render:function(e){return'<div class="moto-editor-helper moto-editor-helper_drag-hover"><div class="moto-editor-outline"></div><div class="moto-editor-label moto-editor-helper-label_top"><span class="helper-label">'+MotoEditor.translate(e.widget.label)+"</span></div></div>"}}}}function HelperDragOverClass(){this._templates={base:{render:function(){return'<div class="moto-editor-helper moto-editor-helper_drag-over"><div class="moto-editor-outline"></div></div>'}}}}function HelperHighlightClass(){this._templates={base:{render:function(){return'<div class="moto-editor-helper moto-editor-helper_highlight"><div class="moto-editor-outline"></div></div>'}}}}function HelperHoverClass(){this._templates={base:{render:function(e){return'<div class="moto-editor-helper moto-editor-helper_hover moto-editor_no-draggable" draggable="true"><div class="moto-editor-outline"></div><div class="moto-editor-label moto-editor-helper-label_top"><span class="moto-editor_draggable" draggable="true"><span class="icon moto-editor-drag-icon"></span><span class="helper-label">'+MotoEditor.translate(e.widget.label)+"</span></span>"+(e.widget.isCopyable()?'<span class="moto-editor_duplicate-closest-widget moto-editor-label-button_widget-duplicate"></span>':"")+(e.widget.isRemovable()?'<span class="moto-editor_remove-closest-widget moto-editor-label-button_widget-remove"></span>':"")+"</div></div>"}}}}function HelperSelectedClass(){this._templates={base:{render:function(e){var t=MotoEditor.HelperSelected._getParentsInfo(e.widget);return'<div class="moto-editor-helper moto-editor-helper_selected moto-editor_no-draggable" draggable="true"><div class="moto-editor-outline"></div><div class="moto-editor-parent-widgets-button-group moto-editor-parent-widgets-button-group_'+t.position+' moto-editor-parent-widgets-list_hidden"><div class="moto-editor-label moto-editor-label_'+t.position+' moto-editor-parent-widgets-button moto-editor_toggle-parent-labels"><span class="moto-editor_draggable" draggable="true"><span class="icon moto-editor-drag-icon"></span><span class="helper-label">'+MotoEditor.translate(e.widget.label)+"</span></span>"+(e.widget.isCopyable()?'<span class="moto-editor_duplicate-closest-widget moto-editor-label-button_widget-duplicate"></span>':"")+(e.widget.isRemovable()?'<span class="moto-editor_remove-closest-widget moto-editor-label-button_widget-remove"></span>':"")+"</div>"+t.template+"</div></div>"}}},this.onToggleParentLabelsClick=function(e){$(e.currentTarget).closest(".moto-editor-parent-widgets-button-group").toggleClass("moto-editor-parent-widgets-list_hidden"),e.stopPropagation()}}function InsertLineClass(){}function MotoEditorEnvironmentClass(e){var t={};(e=e||{}).window=e.window||window,e.document=e.document||document,e.$=e.$||e.window.$,this.setGlobal=function(e,n,i){return!(!angular.isString(e)||e.indexOf(".")>0)&&(i=i||{},e=e.trim(),!(t[e]&&!t[e].rewritable)&&(i.rewritable=i.rewritable||!0,t[e]={entity:n,rewritable:i.rewritable},i.rewritable&&(this["__"+e]=n),!0))},this.getGlobal=function(e){return!angular.isString(e)||e.indexOf(".")>0?null:t[e]&&t[e].entity||null},this.setGlobal("$",$),this.setGlobal("window",e.window),this.setGlobal("document",e.document),e.$&&(this.setGlobal("$window",$(e.window)),this.setGlobal("$document",$(e.document)))}function MotoEditorUtilsClass(e){this.$=e.getGlobal("$")}function MotoEditorWidgetsUtilsClass(e){this.MotoEditor=e.getEditor(),this._widgets=this._widgets,this._indexById=this._indexById,this._indexByName=this._indexByName,this._indexByWidthChanged=this._indexByWidthChanged}function MotoEditorEventsHandlerClass(e){function t(e,t){i.Widgets.updateCache(t),i.getHelpers().hideHelpers()}function n(e,t){i.Widgets.massCall(i.Widgets.getNestedWidgetsByWidget(t),{method:"onWidthChanged"})}var i,o,r=e;this.run=function(){i=r.getEditor(),(o=i.getScope()).$on("widget.preset.afterChange",t),o.$on("Widget.WidthChangedByWidget",n)}}String.prototype.replace_all=function(e,t){var n=this.valueOf();for(e=e||"",t=t||"";n.indexOf(e)>=0;)n=n.replace(e,t);return n},window._id_counter=-1,Object.prototype.hasOwnProperty("_id")||Object.defineProperty(Object.prototype,"_id",{value:"",enumerable:!1,writable:!0}),Object.prototype.hasOwnProperty("set_id")||Object.defineProperty(Object.prototype,"set_id",{value:function(e){var t=this;return e?t._id=e:(window._id_counter++,t._id="__"+window._id_counter+"__"),t._id},enumerable:!1,writable:!1}),Object.prototype.hasOwnProperty("get_id")||Object.defineProperty(Object.prototype,"get_id",{value:function(){return this._id},enumerable:!1,writable:!1}),Object.prototype.hasOwnProperty("forIn")||Object.defineProperty(Object.prototype,"forIn",{value:function(e){var t,n=this;if(e)for(t in n)e(t,n[t])},enumerable:!1,writable:!1}),Object.prototype.hasOwnProperty("forBack")||Object.defineProperty(Object.prototype,"forBack",{value:function(e){var t,n=this;for(t=n.length-1;t>=0;t--)e(n[t],t,n)},enumerable:!1,writable:!1}),Array.prototype.hasOwnProperty("clone")||Object.defineProperty(Array.prototype,"clone",{value:function(){var e,t=this,n=[];for(e=0;e<t.length;e++)t[e]instanceof Array?n.push(t[e].clone()):t[e]instanceof Object?n.push(t[e].copy()):n.push(t[e]);return n},enumerable:!1,writable:!1});var Signals=function(e){function t(){return"development"==h}function n(e,t){var n=this;n._i=e,n._fn=t}function i(e,t,i){var o=!1,r=!1,a=null;return{ns:e,name:t,names:t.split("."),args:i,stopPropagation:function(){o=!0},isStop:function(){return o},freeze:function(){r=!0},unfreeze:function(){var e=a;r=!1,a=null,e&&e.keepOn()},isFreeze:function(){return r},registerFrezer:function(e){r&&e instanceof n&&(a=e)}}}function o(e,t,n){if(f[e][t]=f[e][t]||[],void 0===f[e][t].count&&(f[e][t].count=10),f[e][t].indexOf(n)>=0){if(f[e][t].count--,f[e][t].count<0)throw r(e,t),'Signals. !!!Collision!!! Trigger "'+t+'" go to recursion.'}else f[e][t].push(n)}function r(e,t){delete f[e][t]}function a(e){return p[e]=p[e]||{},f[e]=f[e]||{},p[e]}function s(e){var t,n=e;return e.indexOf(".")>=0&&(n=[],e.split(".").forEach(function(e){t?(t=t+"."+e,n.push(t)):(t=e,n.push(e))})),n}function d(e,t){var n,i=[];return n=a(e),"string"==typeof(t=s(t))?(n[t]=n[t]||[],i=n[t]):Array.isArray(t)&&t.forEach(function(e){n[e]=n[e]||[],i.push.apply(i,n[e])}),i.sort(function(e,t){return e._priority-t._priority}),i}function l(e,t,n,i){var o;"function"==typeof n&&(void 0===i&&(i=0),n._priority=i,(o=a(e))[t]=o[t]||[],o[t].indexOf(n)<0&&o[t].push(n))}function c(e,t,n){var i,o;"function"==typeof n&&(i=a(e))[t]&&((o=i[t].indexOf(n))>=0&&i[t].splice(o,1),0==i[t].length&&(delete i[t],delete f[t]))}function g(e,t){var n;(n=a(e))[t]&&(delete n[t],delete f[t])}function u(e,a){function s(i){var d,g=0;for(void 0!==i&&(g=i+1);g<c.length;g++){if(l.isStop())return void r(e,a);d=c[g],o(e,a,d);try{d.apply(l,l.args)}catch(e){t()&&(console.error("Error on Signals Calling",e),console.info("Dump idx : ",i),console.info("Dump fn : ",d),console.info("Dump trigger (t) : ",l),console.info("Dump arguments : ",l.args))}if(l.isFreeze())return void l.registerFrezer(new n(g,s));c.length-1==g&&r(e,a)}}var l,s,c=d(e,a),g=[];g.push.apply(g,arguments),g=g.splice(2),l=new i(e,a,g),s()}if(e)return e;var a,d,l,c,s,u,o,r,n,i,p={},f={},h="production";return n.prototype={_i:0,_fn:null,keepOn:function(){var e=this;e._fn(e._i)},isInstance:function(e){return e instanceof n}},e={setEnvironmentStage:function(e){h=e||h},create:function(e){var t=this,n=e||{}.set_id();return{parent:t,getNameSpace:function(){return n},on:function(){var e=this,i=[];return i.push.apply(i,arguments),i.unshift(n),t.on.apply(t,i),e},off:function(){var e=this,i=[];return i.push.apply(i,arguments),i.unshift(n),t.off.apply(t,i),e},clearAll:function(){var e=this,i=[];return i.push.apply(i,arguments),i.unshift(n),t.clearAll.apply(t,i),e},trigger:function(){var e=this,i=[];return i.push.apply(i,arguments),i.unshift(n),t.trigger.apply(t,i),e}}},on:function(){var e=this;return l.apply(l,arguments),e},off:function(){var e=this;return c.apply(c,arguments),e},clearAll:function(){var e=this;return g.apply(g,arguments),e},trigger:function(){var e=this;return u.apply(u,arguments),e},connect:function(){var e=this;return e.on.apply(e,arguments),e},disconnect:function(){var e=this;return e.off.apply(e,arguments),e},signal:function(){var e=this;return e.trigger.apply(e,arguments),e}}}(Signals);AbstractHelperClass.prototype={run:function(){},destroy:function(){},_isWidgetHasActiveHelperInDom:function(e,t){return e&&e._activeHelpers&&e._activeHelpers[t]&&e._dom==e._activeHelpers[t].parent()[0]},registerTemplate:function(e,t){angular.isString(t)?this._templates[e]={_content:t,render:function(){return this._content}}:this._templates[e]=t},unregisterTemplate:function(e){delete this._templates[e]},getTemplate:function(e){return this._templates[e]||this._templates.base},showByWidget:function(e){var t;return e&&(e._activeHelpers&&e._activeHelpers[this.type]?this._isWidgetHasActiveHelperInDom(e,this.type)||e._$dom.prepend(e._activeHelpers[this.type]):(t=this.getTemplate(e.name).render({widget:e,type:this.type}),e._activeHelpers=e._activeHelpers||{},e._activeHelpers[this.type]=$(t),e._$dom.prepend(e._activeHelpers[this.type]))),this},hideByWidget:function(e){return e&&e._activeHelpers&&e._activeHelpers[this.type]&&(e._activeHelpers[this.type].remove(),delete e._activeHelpers[this.type]),this},updateByWidget:function(e){return this.hideByWidget(e),this.showByWidget(e),this}};var HelperDD={convertPosition:function(e){var t=e.positionMethod,n=e.targetWidget,i=e.targetElement,o=e.droppedWidget||null,r=angular.isUndefined(e.positionIndexDelta)?0:e.positionIndexDelta,a={positionIndex:0,containerIndex:0,positionMethod:t,name:n.name,id:n.getWidgetId(),targetWidget:n,targetElement:i},s=0,d=-1;return s=n.getContainerPositionIndex(),n.isContainer()&&"prepend"===t&&(t="append",d=0),["before","after"].indexOf(t)>-1&&(n._parent?(d=n.getPositionIndexInContainer(),n=n._parent,o&&n===o._parent&&s===n.getContainerIndexByElement(o._$dom)&&o._$dom.index()<d&&d--,"after"==t&&d++,d+=r,t="append"):console.error("DD HELPER : targetWidget not have parent")),a.name=n.name,a.id=n.getWidgetId(),a.positionMethod=t,a.positionIndex=d,a.containerIndex=s,a.targetWidget=n,a}};HelperDragHoverClass.prototype=Object.create(AbstractHelperClass.prototype),angular.extend(HelperDragHoverClass.prototype,{constructor:HelperDragHoverClass,type:"drag-hover"}),HelperDragOverClass.prototype=Object.create(AbstractHelperClass.prototype),angular.extend(HelperDragOverClass.prototype,{constructor:HelperDragOverClass,type:"drag-over"}),HelperHighlightClass.prototype=Object.create(AbstractHelperClass.prototype),angular.extend(HelperHighlightClass.prototype,{constructor:HelperHighlightClass,type:"highlight"}),HelperHoverClass.prototype=Object.create(AbstractHelperClass.prototype),angular.extend(HelperHoverClass.prototype,{constructor:HelperHoverClass,type:"hover"}),HelperSelectedClass.prototype=Object.create(AbstractHelperClass.prototype),angular.extend(HelperSelectedClass.prototype,{constructor:HelperSelectedClass,type:"selected",_getParentsInfo:function(e){var t,n,i,o,r;for(r=[],t=MotoEditor.getElementCharacteristics(e._$dom);e._parent&&5!=r.length;)(e=e._parent).isVisibleInNesting()&&(o='<div class="moto-editor-parent-widget-item"><div class="moto-editor-label moto-editor_select-widget-by-id-attribute" data-id="'+e._id+'"><span class="icon icon-'+e.name.replace(/\./g,"-")+'"></span><span class="helper-label">'+MotoEditor.translate(e.label)+"</span></div></div>",r.push(o));return n=27*(r.length+1),"top"==(i=n<t.top?"top":"bottom")&&(r=r.reverse()),{position:i,template:'<div class="moto-editor-parent-widgets-list">'+r.join("")+"</div>"}},run:function(){MotoEditor._$body.find(".moto-section").on("click",".moto-editor_toggle-parent-labels",this.onToggleParentLabelsClick)},destroy:function(){MotoEditor._$body.find(".moto-section").off("click",".moto-editor_toggle-parent-labels",this.onToggleParentLabelsClick)}}),InsertLineClass.prototype={showByWidgetAndPosition:function(e,t){var n;("prepend"===t||"append"===t)&&e._$dom.children(".moto-editor-insert-line").length||"after"===t&&e._$dom.next().hasClass("moto-editor-insert-line")||"before"===t&&e._$dom.prev().hasClass("moto-editor-insert-line")||(this.hide(),this.$insertLineDom=$('<div class="moto-editor-insert-line"></div>'),e._$dom[t](this.$insertLineDom[0]),n="height 300ms",this.$insertLineDom.css({transition:n,"-webkit-transition":n}),setTimeout(function(){this.$insertLineDom.css("height","20px")}.bind(this),0))},hide:function(){this.$insertLineDom&&this.$insertLineDom.remove()}},MotoEditorEnvironmentClass.prototype={ENVIRONMENT_STAGE:"production",isDevelopmentStage:function(){return"development"==this.ENVIRONMENT_STAGE},setStage:function(e){return this.ENVIRONMENT_STAGE=e,this},getStage:function(){return this.ENVIRONMENT_STAGE},connectEditor:function(e){return this.setGlobal("Editor",e,{writable:!1})},setScope:function(e){return this.setGlobal("$scope",e,{writable:!1})},getScope:function(){return this.getGlobal("$scope")},getEditor:function(){return this.getGlobal("Editor")},setEventManager:function(e){return this.setGlobal("EventManager",e),this},getEventManager:function(){return this.getGlobal("EventManager")},setTranslator:function(e){return this.setGlobal("Translator",e),this},getTranslator:function(){return this.getGlobal("Translator")},setWidgetFactory:function(e){return this.setGlobal("WidgetFactory",e),this},getWidgetFactory:function(){return this.getGlobal("WidgetFactory")},setLivePreviewService:function(e){return this.setGlobal("LivePreviewService",e),this},getLivePreviewService:function(){return this.getGlobal("LivePreviewService")},sdsdsdsds:function(){}},MotoEditorUtilsClass.prototype={$:null,isEvent:function(e){return!!(e&&angular.isObject(e)&&e.target&&e.preventDefault&&e.stopPropagation)},isDomElementAWidget:function(e){return!!angular.isElement(e)&&!!$(e).data("widget")},getClosestElementBySelector:function(e,t){return e&&t?this.$(e).closest(t).get(0):null},getClosestWidgetElement:function(e){return this.getClosestElementBySelector(e,"[data-widget]")},getClosestWidgetElementForDrag:function(e){var t;return t=this.getClosestElementBySelector(e,'[draggable="true"]'),t=this.getClosestElementBySelector(t,"[data-widget]")},getClosestSectionElement:function(e){return this.getClosestElementBySelector(e,".moto-section")},getNestedWidgetElementsByDom:function(e){return this.$(e).find(".moto-widget[data-widget]")},getChildWidgetElementsByDom:function(e){return this.$(e).children(".moto-widget[data-widget]")},getClosestWidgetElementByEvent:function(e){return this.getClosestWidgetElement(e.target)},cleanUpWidgetDom:function(e){this.$(e).removeAttr("id").removeClass("moto-editor_this_widget_hovered moto-widget_selected moto-widget_hover moto-widget_empty").find("[draggable]").addBack().removeAttr("draggable").find("[contenteditable]").addBack().removeAttr("contenteditable").find("[data-draggable-disabled]").addBack().removeAttr("data-draggable-disabled").find("[data-widget-id]").addBack().removeAttr("data-widget-id")},getContainerEdgeHeight:function(e){var t=e._$dom.outerHeight();return t<=25?parseInt(t/3):10}},MotoEditorWidgetsUtilsClass.prototype={MotoEditor:null,_widgets:[],_indexById:{},_indexByName:{},_indexByWidthChanged:[],getAll:function(){return this._widgets},getById:function(e){return this._indexById[e]||null},getByDom:function(e){return e&&this.getById(e.id)},getWidgetsByName:function(e){if(angular.isArray(e)){var t,n=[],i=e.length;for(t=0;t<i;t++)n=n.concat(this.getWidgetsByName(e[t]));return n}return this._indexByName[e]||[]},getWidgetsWithWidthChanged:function(){return this._indexByWidthChanged},_massCallHelperApply:function(e,t,n){return e[t].apply(e,n)},_massCallHelperRun:function(e,t,n){return e[t](n)},massCall:function(e,t){t=t||{};var n,i,o=e.length,r=this._massCallHelperRun,a=t.postProcessor||angular.noop,s=t.errorProcessor||angular.noop;if(!angular.isString(t.method))return!1;if(!angular.isArray(e))return!1;for(angular.isArray(t.args)&&(r=this._massCallHelperApply),n=0;n<o;n++)try{i=e[n],angular.isFunction(i[t.method])&&a(r(i,t.method,t.args),i,t)}catch(e){s(e,i,t)}},__matchFunctionTrue:function(){return!0},__matchFunctionStringName:function(e,t){return t.name===e.name},__matchFunctionArrayName:function(e,t){return t.name.indexOf(e.name)>-1},_getSubWidgetsByDom:function(e,t,n){if(!this.MotoEditor.Utils[t])return!1;(n=n||{}).where=n.where||null;var i,o,r=this.MotoEditor.Utils[t](e),a=r.length,s=[],d=this.__matchFunctionTrue;for(n.where&&(angular.isString(n.where.name)&&n.where.name?d=this.__matchFunctionStringName:angular.isArray(n.where.name)?d=this.__matchFunctionArrayName:angular.isFunction(n.where)&&(d=n.where)),o=0;o<a;o++)(i=this.getByDom(r[o]))&&d(i,n.where)&&s.push(i);return s},getNestedWidgetsByDom:function(e,t){return this._getSubWidgetsByDom(e,"getNestedWidgetElementsByDom",t)},getNestedWidgetsByWidget:function(e,t){return e&&this.getNestedWidgetsByDom(e._dom,t)||[]},getChildrenWidgetsByDom:function(e,t){return this._getSubWidgetsByDom(e,"getChildWidgetElementsByDom",t)},getChildrenWidgetsByWidget:function(e,t){return e&&this.getChildrenWidgetsByDom(e.getDomElementsWhereWidgetsCanBePlaced(),t)||[]},updateCache:function(e){this._indexById[e.getId()]||(this._widgets.push(e),this._indexByName[e.name]=this._indexByName[e.name]||[],this._indexByName[e.name].push(e),this._indexById[e._id]=e,angular.isFunction(e.onWidthChanged)&&this._indexByWidthChanged.push(e))},cleanIndexNameByWidget:function(e){var t;e&&e.name&&this._indexByName[e.name]&&(t=this._indexByName[e.name].indexOf(e))>-1&&this._indexByName[e.name].splice(t,1)},cleanIndexWidthChangedByWidget:function(e){var t;e&&angular.isFunction(e.onWidthChanged)&&(t=this._indexByWidthChanged.indexOf(e))>-1&&this._indexByWidthChanged.splice(t,1)},removeCache:function(e){if(!e)return!1;this._indexById[e._id]&&(this._indexById[e._id]=null,delete this._indexById[e._id]);var t=this._widgets.indexOf(e);if(t>-1&&this._widgets.splice(t,1),this.cleanIndexNameByWidget(e),this.cleanIndexWidthChangedByWidget(e),e.isContainer()){var n,i=e.getChildrenWidgets(),o=i.length;for(n=0;n<o;n++)this.removeCache(i[n])}return!0},scrollTo:function(e,t){e&&e._$dom&&(t=t||angular.noop,this.MotoEditor._window.$("html, body").animate({scrollTop:e._$dom.offset().top-100},400).promise().then(t))},isNeedToScroll:function(e){var t,n=this.MotoEditor._$window.scrollTop(),i=this.MotoEditor._$window.height();return!(!e||!e._$dom)&&((t=e._$dom.offset().top)<n||t>.8*i+n)},checkAndScrollTo:function(e,t){t=t||angular.noop,angular.isString(e)&&(e=this.getById(e)),e&&this.isNeedToScroll(e)?this.scrollTo(e,t):t(!0)},existsById:function(e){return!!this.getById(e)}},function(e){function t(){return m.isDevelopmentStage()}function n(e,t,n){try{return angular.isArray(n)||(n=[n]),e[t].apply(e,n)}catch(n){e[t]&&(console.error("callSafely : error",n),console.error("callSafely : target",e),console.error("callSafely : method",t))}return!1}function i(){}function o(){}function r(){}function a(){}function s(e){var n;if(y[e])return y[e];switch(e){case"creating":n=o;break;case"initialize":n=r;break;case"pasting":n=a}return n?(y[e]=new n,y[e]):(t()&&console.error("Unknown scenario ",e),null)}function d(e){var t,i,o;for(angular.isArray(e)||(e=[e]),t=0,i=e.length;t<i;t++)n(o=e[t],"beforeDestroy"),o.isContainer()&&d(o.children),o._$dom&&o._$dom.remove(),n(o,"afterDestroy"),v.Widgets.removeCache(o),n(o,"afterDestroyLog")}function l(e){return v.getWidgetById(e.targetConfig.targetWidgetId)}function c(e){return e.targetConfig&&angular.isDefined(e.targetConfig.indexInContainer)?e.targetWidget:["prepend","append","cell-left","cell-right"].indexOf(e.position)>-1?e.targetWidget:e.targetWidget._parent}function g(e){var t="section"===e.parentWidget.name&&!b.isContainers(e.droppedWidgetOptions.widgetName);return t=v._callInterceptor(v.INTERCEPTOR__IS_NEED_TO_WRAP_WITH_ROW,t,e)}function u(e){var n,i,o,r,a,d;if(!(n=e.droppedWidgetOptions.widget))return(n=b.createWidgetByName(e.droppedWidgetOptions.widgetName,e.droppedWidgetOptions.options,e.parentWidget))||t()&&console.error("WidgetFactory._insertWidget : createWidgetByName not created widget",e.droppedWidgetOptions.widgetName),b.reviveChildrenWidgets(n),e.droppedWidgetOptions.widget=n,void n.renderAsString(function(i,o){i&&t()&&(console.groupEnd(),console.group("ERROR on WidgetFactory._insertWidget"),console.error("WidgetFactory._insertWidget : end with error"),console.log("ERROR:",i),console.log("WIDGET:",n),console.log("CONTENT:",o),console.groupEnd()),n._replaceNode(o),u(e)},{mode:"new",debug:!1});e.positionMethod?(a=(r=e.targetWidget).getDomElementsWhereWidgetsCanBePlaced(),(i=r.$(a[e.containerIndex||0])).append(n._dom),angular.isDefined(e.positionIndex)&&e.positionIndex>-1&&n.getPositionIndexInContainer()!==e.positionIndex&&(d=i.children(".moto-widget[data-widget]").eq(e.positionIndex))&&d.before(n._dom)):(i=e.targetWidget.getTargetElement(e))[e.position](n._dom),delete e.targetWidget._targetDomElement,delete e.targetWidget._$targetDomElement,n._dom.setAttribute("draggable",n.isDraggable()),angular.isDefined(e.widgetProcessorName)&&(o=s(e.widgetProcessorName)),o||(o=s("creating")),o.execute(n),n._propertiesLoaded=!0,delete n._config,v.Widgets.updateCache(n),n._parent&&n._parent.triggerEvent("appendChild",n,i,"new"),e.needToSelect&&n.select(),v.getScope().$broadcast("NEW EVENT: Insert widget after",n),e.callback&&e.callback(n)}function p(e){var t,n,i,o,r;t=e.droppedWidgetOptions.widget,e.positionMethod?(o=(i=e.targetWidget).getDomElementsWhereWidgetsCanBePlaced(),n=i.$(o[e.containerIndex||0]),t._parent.triggerEvent("removeChild",t),n.append(t._dom),t._parent=i,angular.isDefined(e.positionIndex)&&e.positionIndex>-1&&t.getPositionIndexInContainer()!==e.positionIndex&&(r=n.children().eq(e.positionIndex),(r=n.children(".moto-widget[data-widget]").eq(e.positionIndex))?(console.warn(i.name,": insertChildAction : move new widget from ",t._$dom.index(),t.getPositionIndexInContainer()," to ",e.positionIndex),r.before(t._dom)):console.warn(i.name,": insertChildAction : cant find exists widget by index",e.positionIndex)),t._parent.triggerEvent("appendChild",t,n,"move")):((n=e.targetWidget.getTargetElement(e))[e.position](t._dom),t._parent&&t._parent.triggerEvent("removeChild",t),t._parent=e.parentWidget,t._parent&&t._parent.triggerEvent("appendChild",t,n,"move")),delete e.targetWidget._targetDomElement,delete e.targetWidget._$targetDomElement,t.triggerEvent("moved"),e.needToSelect&&t.select(),t._Editor.getScope().$broadcast("NEW EVENT: Move widget after",t),e.callback&&e.callback(t)}function f(e){var t,n,i={needToSelect:!0,targetConfig:{}};if(e.droppedWidgetOptions.isNew?v.getScope().$broadcast("NEW EVENT: Insert widget before"):v.getScope().$broadcast("NEW EVENT: Move widget before",e.droppedWidgetOptions.widget),e=angular.extend(i,e),(e=v._callInterceptor(v.INTERCEPTOR__INSERT_OR_MOVE_WIDGET_OPTIONS,e)).targetWidget=e.targetWidget||l(e),e.parentWidget=e.parentWidget||c(e),e.targetConfig&&angular.isDefined(e.targetConfig.indexInContainer)&&(e.targetConfig.containerIndex=e.targetConfig.containerIndex||0,t=$(e.targetWidget.getDomElementsWhereWidgetsCanBePlaced()[e.targetConfig.containerIndex]),0===e.targetConfig.indexInContainer?(e.position="prepend",e.targetWidget._targetDomElement=t):(e.position="after",e.targetWidget._targetDomElement=e.targetWidget.children[e.targetConfig.indexInContainer-1]._dom),e.targetWidget._$targetDomElement=$(e.targetWidget._targetDomElement)),"left"!==e.position&&"right"!==e.position)return"cell-left"===e.position||"cell-right"===e.position?(n=e.targetWidget.getLocationInEditor(),void f({targetWidget:e.targetWidget._parent,droppedWidgetOptions:{isNew:!0,widgetName:"row.column",options:{properties:[{size:6}]}},needToSelect:!1,callback:function(t){t._parent.normalizeColumnSizes(),v.getScope().$broadcast("Widget.WidthChangedByWidget",this._parent),f({targetWidget:t,droppedWidgetOptions:e.droppedWidgetOptions,callback:e.callback,targetConfig:{containerIndex:0,indexInContainer:0}})},targetConfig:{containerIndex:0,indexInContainer:"cell-left"===e.position?n.indexInContainer:n.indexInContainer+1}})):void(g(e)?f({targetWidget:e.targetWidget,droppedWidgetOptions:{isNew:!0,widgetName:"row",widget:null,options:{children:[{name:"row.column"}]}},position:e.position,needToSelect:!1,callback:function(t){f({droppedWidgetOptions:e.droppedWidgetOptions,callback:e.callback,widgetProcessorName:e.widgetProcessorName?e.widgetProcessorName:void 0,targetConfig:{containerIndex:0,indexInContainer:0,targetWidgetId:t.children[0].getWidgetId()}})}}):e.droppedWidgetOptions.isNew?u(e):p(e));f({targetWidget:e.targetWidget,droppedWidgetOptions:{isNew:!0,widgetName:"row",options:{children:[{name:"row.column",properties:{size:6}},{name:"row.column",properties:{size:6}}]}},position:"before",needToSelect:!1,callback:function(t){f({targetWidget:t.children["left"===e.position?1:0],droppedWidgetOptions:{isNew:!1,widgetName:e.targetWidget.name,widget:e.targetWidget},needToSelect:!1,targetConfig:{indexInContainer:0},callback:function(){f({targetWidget:t.children["left"===e.position?0:1],droppedWidgetOptions:e.droppedWidgetOptions,callback:e.callback,targetConfig:{indexInContainer:0}})}})}})}function h(e){this._Environment=e,this.MotoEditor=e.getEditor(),this.ACL=new MotoEditorContentManagerACL(e),this.ContentHistoryManager={startTransaction:function(){return{complete:angular.noop}}},v=this.MotoEditor,m=e}var m,v,_,w,b,y={};i.prototype={_VERBOSE:!1,execute:function(e){},executeChildren:function(e){},callSafely:function(e,t,i){return this._VERBOSE&&(e.name&&e.getId?console.info(e.name,e.getId(),t):console.info("callSafely",t,"of",e)),n(e,t,i)}},o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.execute=function(e){e._initialized=!1,this.callSafely(e,"beforeCreate"),e.isContainer()&&e.children.length&&(this._VERBOSE&&console.group(e.name,e.getId()),this.executeChildren(e.children),this._VERBOSE&&console.groupEnd()),1===e._apiVersion?this.callSafely(e,"initialize",[{isNew:!0}]):this.callSafely(e,"create"),this.callSafely(e,"afterCreate"),e._initialized=!0},o.prototype.executeChildren=function(e){var t,n,i,o;for(angular.isArray(e)||(e=[e]),t=0,n=e.length;t<n;t++)o=e[t],this._VERBOSE&&console.group(o.name),o._initialized=!1,o._silentMode=!0,(i=o.$("#"+o.getId())).length||(i=o.$(".moto-widget[data-widget-id="+o.getId()+"]")),i.length&&(o.connectNode(i.get(0)),o._dom.setAttribute("draggable",o.isDraggable())),this.callSafely(o,"beforeCreate"),o.isContainer()&&this.executeChildren(o.children),1===o._apiVersion?this.callSafely(o,"initialize",[{isNew:!0}]):this.callSafely(o,"create"),o._propertiesLoaded=!0,v.Widgets.updateCache(o),o.updateEmptyClass(),this.callSafely(o,"afterCreate"),o._initialized=!0,o._silentMode=!1,this._VERBOSE&&console.groupEnd()},r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.connectChildren=function(e){var t,n,i,o,r;if(t=e.getDomElementsWhereWidgetsCanBePlaced())if(n=v.Utils.getChildWidgetElementsByDom(t),r=n.length){for(angular.isArray(e.children)?e.children.length=0:e.children=[],this._VERBOSE&&console.info(e.name,"connectChildren : found "+r+" widget dom"),o=0;o<r;o++)(i=v.getWidgetByDom(n[o]))?i.setParentWidget(e):(i=b.createWidgetByDom(n[o],e),v.Widgets.updateCache(i)),i?e.children.push(i):this._VERBOSE&&console.warn(e.name,"connectChildren : can not create widget from dom",n[o]);e._childrenInited=!0}else this._VERBOSE&&console.info(e.name,"connectChildren : not found children dom on $holders",t);else this._VERBOSE&&console.info(e.name,"connectChildren : not have widget holders => skip",t)},r.prototype.execute=function(e,t){var n,i;if(b.isWidget(e))i=e;else{if(!(n=$(e)).data("widget"))return this._VERBOSE&&console.warn("Target not have data-widget",e),null;if(!(i=b.createWidgetByDom(n,t)))return this._VERBOSE&&console.warn("Can not create widget by DOM",n),null}return v.Widgets.updateCache(i),i._dom.setAttribute("draggable",i.isDraggable()),i._silentMode=!0,i._initialized?this._VERBOSE&&console.warn("Widget already initialized",i.name,i.getId()):this.callSafely(i,"beforeInitialize"),this.connectChildren(i),i.isContainer()&&i.children.length&&(this._VERBOSE&&console.group(i.name,i.getId()),this.executeChildren(i.children),this._VERBOSE&&console.groupEnd()),i._initialized||(1===i._apiVersion?this.callSafely(i,"initialize",[{isNew:!1}]):this.callSafely(i,"initialize")),i._propertiesLoaded=!0,i.updateEmptyClass(),i._initialized||this.callSafely(i,"afterInitialize"),v.Widgets.updateCache(i),i._silentMode=!1,i._initialized=!0,i},r.prototype.executeChildren=function(e){var t,n,i,o;for(angular.isArray(e)||(e=[e]),t=0,n=e.length;t<n;t++)o=e[t],this._VERBOSE&&console.group(o.name),o._silentMode=!0,o._$dom||((i=o.$("#"+o.getId())).length||(i=o.$(".moto-widget[data-widget-id="+o.getId()+"]")),i.length&&o.connectNode(i.get(0))),o._dom.setAttribute("draggable",o.isDraggable()),o._initialized||this.callSafely(o,"beforeInitialize"),this.connectChildren(o),o.isContainer()&&this.executeChildren(o.children),o._initialized||(1===o._apiVersion?this.callSafely(o,"initialize",[{isNew:!1}]):this.callSafely(o,"initialize")),o._propertiesLoaded=!0,o.updateEmptyClass(),o._initialized||this.callSafely(o,"afterInitialize"),v.Widgets.updateCache(o),o._silentMode=!1,o._initialized=!0,this._VERBOSE&&console.groupEnd()},a.prototype=Object.create(o.prototype),a.prototype.constructor=a,a.prototype.execute=function(e){e._silentMode=!0,o.prototype.execute.apply(this,arguments),e._silentMode=!1},e.MotoEditorContentManager=h,h.prototype={_Environment:null,MotoEditor:null,ContentHistoryManager:null,_WidgetFactory:null,_EventManager:null,ACL:null,setInjector:function(e){var t;(w=e).has("core.library.editor.ContentHistoryManager")&&(t=w.get("core.library.editor.ContentHistoryManager")).prototype.startTransaction&&(this.ContentHistoryManager=new t(this)),this.ACL.setWidgetService(w.get("core.library.editor.WidgetsService"))},getWidgetProcessor:s,getWidgetFactory:function(){return this._WidgetFactory||(this._WidgetFactory=this._Environment.getWidgetFactory())},setWidgetFactory:function(e){return this._WidgetFactory=e,this.ACL.setWidgetFactory(e),b=e,this},setEventManager:function(e){return _=e,this._EventManager=e,this},insertOrMoveWidgetByOptions:function(e){var t,n=e.callback||angular.noop;!e.droppedWidgetOptions.widgetName&&e.droppedWidgetOptions.widget&&(e.droppedWidgetOptions.widgetName=e.droppedWidgetOptions.widget.name),e.callback=function(e){t&&(e?v.HistoryManager.endActionsTransaction("InsertOrMoveWidget",{widgetId:e.getId()}):v.HistoryManager.rejectActionsTransaction("InsertOrMoveWidget")),n(e)},v.HistoryManager.getTransactionInProcess()||(t=v.HistoryManager.startActionsTransaction("InsertOrMoveWidget")),e.targetWidget=e.targetWidget||l(e),e.parentWidget=e.parentWidget||c(e),this.ACL.isAllowDropObject(e.droppedWidgetOptions,e.parentWidget,e.position)?(e.droppedWidgetOptions.isNew?_.trigger("Widget.Create.AccessGranted",e):_.trigger("Widget.Move.AccessGranted",e),f(e)):(e.droppedWidgetOptions.isNew?_.trigger("Widget.Create.AccessDenied",e):_.trigger("Widget.Move.AccessDenied",e),e.callback(null))},duplicateWidget:function(e,t){var n,i,o,r,a=this.getWidget(e);return angular.isFunction(t)||(t=angular.noop),a?(n=this.ContentHistoryManager.startTransaction("DUPLICATE_WIDGET",a),r=a.exportForCopy(),o=a.getPositionInContent(),i=a._parent?a._parent:a,o.widgetId=i.getId(),o.positionIndex++,this.pasteWidgetFromBuffer(r,o,function(e,i){n.complete(e,i),t(e,i)})):t({message:"Cant find widget by id",id:e})},pasteWidgetFromBuffer:function(e,t,n){var i,o;return angular.isFunction(n)||(n=angular.noop),angular.isObject(e)&&angular.isString(e.name)&&angular.isObject(e.properties)?angular.isObject(t)?angular.isUndefined(t.widgetId)?n({message:'"targetPosition" not have "widgetId"',value:t}):(o=this.getWidget(t.widgetId))?v.HistoryManager.startActionsTransaction("PasteWidget")?(e=angular.copy(e),t=angular.copy(t),i=this.ContentHistoryManager.startTransaction("PASTE_WIDGET",{buffer:e,target:t,targetWidget:o}),void f({targetWidget:o,parentWidget:o,droppedWidgetOptions:{isNew:!0,widgetName:e.name,options:e},position:"append",positionMethod:"append",positionIndex:t.positionIndex||-1,containerIndex:t.containerIndex||0,widgetProcessorName:"pasting",needToSelect:!0,callback:function(e){_.trigger("NEW EVENTS: this widget will be paste",e),v.getScope().$broadcast("NEW EVENTS: the widget was pasted",e),o.emitEvent("contentUpdated",o),i.complete(null,e),v.HistoryManager.endActionsTransaction("PasteWidget"),n(null,e)}})):n({message:'"PasteWidget" transaction was not started',value:t}):n({message:'Widget with id "'+t.widgetId+'" not found',value:t.widgetId}):n({message:'"targetPosition" are not valid',value:t}):n({message:'"Buffer" are not valid',value:e})},getWidget:function(e){return angular.isString(e)&&(e=this.MotoEditor.getWidgetById(e)),e&&e.__isPublicInstance&&(e=e.__internalInstance),b.isWidget(e)||(e=null),e},getPublicInstance:function(e){var t;return angular.isString(e)&&(e=this.MotoEditor.getWidgetById(e)),e&&(t=e.__isPublicInstance?e:e.__publicInstance?e.__publicInstance:this.revivePublicInstance(e)),t},getInternalInstance:function(e){return angular.isString(e)&&(e=this.MotoEditor.getWidgetById(e)),e&&e.__internalInstance&&(e=e.__internalInstance),b.isWidget(e)||(e=null),e},getContentHistoryManager:function(){return this.ContentHistoryManager},__latestScopedPublicInstance:null,revivePublicInstance:function(e,t){var n=null;return t&&this.__latestScopedPublicInstance&&(this.ContentHistoryManager.startTransaction("DESELECT_WIDGET"),this.__latestScopedPublicInstance.__$scope=null),e.__isPublicInstance&&(n=e),e.__publicInstance&&(n=e.__publicInstance),n?n.__syncProperties():n=new(w.get("coreLibraryWidgetPublicInstance"))(e),n.__setScope(t),t&&(this.ContentHistoryManager.startTransaction("SELECT_WIDGET",n),this.__latestScopedPublicInstance=n),n},setWidgetProperties:function(e,t,n){var i=this.getPublicInstance(e);return i?(angular.isFunction(n)&&i.__addPendingCallback(n),i.__$scope?(i.properties=angular.copy(t),i.__$scope.$$phase||i.__$scope.$apply(),!0):(this.setWidgetInternalProperties(e,t),!0)):(angular.isFunction(n)&&n({message:"Widget not found",target:e}),!1)},setWidgetInternalProperties:function(e,t,i){function o(e){e?n(d,"contentViewWasNotUpdated",[e,s]):n(d,"contentViewWasUpdated",[s]),v.getScope().$broadcast("NEW EVENT: Widget properties were changed",d,s),l.__releasePendingCallback(e),r.complete(e,d)}var r,a,s,d=this.getInternalInstance(e),l=this.getPublicInstance(e);if(angular.isFunction(i)||(i=angular.noop),!l)return i({message:"Widget was not found",target:e}),!1;angular.isFunction(i)&&l.__addPendingCallback(i),t=angular.isObject(t)?angular.copy(t):{},s=angular.copy(d.properties),r=this.ContentHistoryManager.startTransaction("SET_PROPERTY_WIDGET",d,{newProperties:t}),n(d,"willReceiveNewProperties",[t]),a=n(d,"shouldUpdateContentView",[t]),d.properties=t,a?d.renderPreview(o):(angular.equals(t.align,s.align),angular.equals(t.spacing,s.spacing)||n(d,"updateSpacingsInDOM"),t.preset,t.preset,n(d,"manualUpdateContentView",[s]),o(null))},destroyWidget:function(e){var t,i,o=this.getWidget(e);return!!o&&((i=this.MotoEditor.HistoryManager.getTransactionInProcess())||this.MotoEditor.HistoryManager.startActionsTransaction("DestroyWidget",{widgetId:o.getId()}),t=this.ContentHistoryManager.startTransaction("DESTROY_WIDGET",o),_.trigger("NEW EVENTS: this widget will be destroy",o),this.MotoEditor.getScope().$broadcast("NEW EVENT: Widget will be removed",o),o._parent&&n(o._parent,"youChildrenWillUpdate",o),o._parent&&n(o._parent,"youChildWillDestroy",o),n(o,"beforeDestroyLog"),n(o,"beforeDestroy"),o.isContainer()&&d(o.children),o._$dom&&o._$dom.remove(),o._parent&&o._parent.triggerEvent("removeChild",o),n(o,"afterDestroy"),this.MotoEditor.getScope().$broadcast("NEW EVENT: Widget was removed",o),this.MotoEditor.Widgets.removeCache(o),n(o,"afterDestroyLog"),o._parent&&n(o._parent,"youChildDidDestroy",o),o._parent&&n(o._parent,"youChildrenDidUpdate",o),t.complete(null,o),i||this.MotoEditor.HistoryManager.endActionsTransaction("DestroyWidget"),!0)}}}(window),function(e){function t(e){return!0===e||!1===e}function n(e){this._Environment=e,this._AccessMap=angular.copy(this._AccessMap),i=e.getEditor()}var i,o={"*":{rules:[":containers"]},section:{rules:!1},row:{rules:!0},container:{rules:":containers"},block:{rules:["section"]}};e.MotoEditorContentManagerACL=n,n.prototype={_Environment:null,_WidgetFactory:null,_WidgetService:null,setWidgetFactory:function(e){return this._WidgetFactory=e,this},setWidgetService:function(e){return this._WidgetService=e,this},_AccessMap:o,_isContainers:function(e){return this._WidgetFactory.isContainers(e)},setRule:function(e,t){return this._AccessMap[e]=t,this},isAllowDropObject:function(e,t,n){var o;return(o=this._isAllow(e.widgetName,t,n))?o=i._callInterceptor(i.INTERCEPTOR__IS_ALLOW_DROP_OBJECT,o,{dropObject:e,targetWidget:t,method:n}):o},_isAllow:function(e,t,n){return this.isAllowDropToWidget(e,angular.isObject(t)?t.name:t,n)&&this.isAllowHoldWidget(e,angular.isObject(t)?t.name:t,n)},isAllowToPasteFromBuffer:function(e,t,n,o){var r;return r=this._isAllowToPasteFromBuffer(e,t.name,n,o),r=i._callInterceptor(i.INTERCEPTOR__BUFFER_IS_ALLOW_TO_PASTE,r,{buffer:e,targetWidget:t,page:n,sectionName:o})},_isAllowToPasteFromBuffer:function(e,t,n,i){return this._isAllow(e.name,t)&&this._WidgetService.isWidgetAllowedToUse(e.name,n,i)},removeUnpastableWidgetsFromBuffer:function(e,t,n,o){var r=angular.copy(e);return(r=i._callInterceptor(i.INTERCEPTOR__PASTE_BUFFER_CLEANING,r,{targetWidget:t,page:n,sectionName:o}))?(r=this._removeUnpastableWidgetsFromBuffer(r,t,n,o),r=i._callInterceptor(i.INTERCEPTOR__PASTE_BUFFER_CLEANED,r,{targetWidget:t,page:n,sectionName:o})):r},_removeUnpastableWidgetsFromBuffer:function(e,t,n,i){var o,r=angular.copy(e);if("children"in r&&(r.children=[]),e.children&&e.children.length)for(o=0;o<e.children.length;o++)this._isAllowToPasteFromBuffer(e.children[o],e.name,n,i)&&r.children.push(this._removeUnpastableWidgetsFromBuffer(e.children[o],e.name,n,i));return r},isAllowHoldWidget:function(e,t,n){var i={};return angular.isObject(e)&&!t&&(e=(i=e).source||null,t=i.target||null,n=n||null),!0},isAllowDropToWidget:function(e,n,i){var o={};if(angular.isObject(e)&&!n&&(e=(o=e).source||null,n=o.target||null),!e||!n)return!1;var r,a,s=this._AccessMap,d=s["*"].rules,l=!1,c=o.debug||!1;if(s[e]&&s[e].rules&&(d=s[e].rules),c&&console.log(" @",o,d),t(d))return c&&console.log(" @ return",d),d;angular.isString(d)&&(d=[d]),c&&console.log(" @ rules",d);for(var g=0,u=d.length;g<u;g++){if(a=d[g],c&&console.log(" @ rule",a,"source",e,"target",n),t[a]){l=a,c&&console.log(" @ isBoolean",a);break}if(angular.isFunction(a)){if(r=a({source:e,target:n,method:i,isAllow:l}),t(r)){l=r,c&&console.log(" @ function",a);break}}else if(angular.isString(a)){if("!"!==a[0]){if(":containers"===a){l=this._isContainers(n),c&&console.log(" @ :containers",n);break}l=a===n}else if(n===a.substr(1)){l=!1,c&&console.log(" @ !",n,a.substr(1));break}}else c&&console.log(" @ skip not string",a)}return c&&console.log(" @ return",l,g),l}}}(window),function(){function e(e,t){te={isNew:null,widgetName:"",options:angular.copy(t)||{},widget:null},angular.isString(e)?(te.widgetName=e,te.isNew=!0):angular.isObject(e)&&(te.widgetName=e.name,te.widget=e,te.isNew=!1)}function t(){return te&&te.widgetName}function n(){te={isNew:null,widgetName:null,widget:null,options:null}}function i(){return"development"===oe}function o(e,t){var n;for(n=e;n;){if(n.getId()===t.getId())return!1;n=n._parent}return!0}function r(e){var t;if(angular.isObject(e)&&e._$dom){re>1&&console.info("Editor.js : activateSectionOnNewDragEnd()",e.name);try{(t=P.Utils.getClosestSectionElement(e._$dom))?(V=t,G=e,U.trigger("section.edit",V.id)):re>1&&console.error("Editor.js : activateSectionOnNewDragEnd() : not found section",t)}catch(e){re>1&&console.error("Editor.js : activateSectionOnNewDragEnd() : SOME ERROR",e)}}else re>1&&console.error("Editor.js : activateSectionOnNewDragEnd() : Bad Widget",e)}function a(e){var t;if(angular.isObject(e)&&e._$dom){re>1&&console.info("Editor.js : activateSectionOnWidgetRemove()",e.name);try{(t=P.Utils.getClosestSectionElement(e._$dom))?(V=t,G=null,U.off("NEW EVENTS: this widget will be destroy",a),U.trigger("section.edit",V.id)):re>1&&console.error("Editor.js : activateSectionOnWidgetRemove() : not found section",t)}catch(e){re>1&&console.error("Editor.js : activateSectionOnWidgetRemove() : SOME ERROR",e)}}else re>1&&console.error("Editor.js : activateSectionOnWidgetRemove() : Bad Widget",e)}function s(e){var t;if(angular.isObject(e)&&e._$dom){re>1&&console.info("Editor.js : activateSectionOnWidgetPaste()",e.name);try{(t=P.Utils.getClosestSectionElement(e._$dom))?(V=t,G=e,U.off("NEW EVENTS: this widget will be paste",s),U.trigger("section.edit",V.id)):re>1&&console.error("Editor.js : activateSectionOnWidgetPaste() : not found section",t)}catch(e){re>1&&console.error("Editor.js : activateSectionOnWidgetPaste() : SOME ERROR",e)}}else re>1&&console.error("Editor.js : activateSectionOnWidgetPaste() : Bad Widget",e)}function d(e){var t;if(d._inProgress)re>1&&console.warn("Editor.js : activateSectionOnDragStart() : DOUBLE RUN");else{d._inProgress=!0;try{(t=P.Utils.getClosestSectionElement(e.target))?(V=t,G=!1,U.trigger("section.edit",V.id)):re>1&&console.error("Editor.js : activateSectionOnDragStart() : not found section",t)}catch(e){re>1&&console.error("Editor.js : activateSectionOnDragStart() : SOME ERROR",e)}}}function l(e){function t(){F.widget.dragOver(e),Q.dragOverTimeoutLastTime=(new Date).getTime()}Q&&(Q.dragOverTimeoutLastTime?Q.dragOverTimeoutLastTime+50<(new Date).getTime()&&t():t())}function c(){Helpers.hover()}function g(){re>0&&console.info("Editor.js : bindSection()"),$(".moto-section").on("click",F.section.editClick),$(document).on("dragend drop",B),parent.$("body").on("dragenter",F.widget.parentBodyDragEnter),$(document).on("dragstart",d),P._$body.on("drop",F.preventDefault).on("dragenter",".moto-widget",F.widget.dragOver).on("dragover",".moto-widget,.moto-section:not(.moto-section_locked)",l).on("dragenter",".moto-section_locked",F.widget.lockedSectionDragEnter).on("mouseleave",c).on("mouseenter",".moto-section_inactive",c).on("dragleave",".moto-section_locked",F.widget.lockedSectionDragLeave)}function u(){re>0&&console.info("Editor.js : unbindSection()"),$(".moto-section").off("click",F.section.editClick),$(document).off("dragstart",d),U.off("NEW EVENTS: this widget will be destroy",a),U.off("NEW EVENTS: this widget will be paste",s)}function p(){ie||($(".helper-insert").on("dragover",F.widget.elementDragOver),P._$window.on("dragover",F.widget.elementDragOver),ie=!0)}function f(){ie&&($(".helper-insert").off("dragover",F.widget.elementDragOver),P._$window.off("dragover",F.widget.elementDragOver),ie=!1,U.trigger("NEW EVENT: Editor helpers hides insert cursor",ee),P.HelperDragHover.hideByWidget(A),A=null,P.InsertLine.hide(),P.getHelpers().hideInsertHelper(),P.HelperDragOver.hideByWidget(R),R=null,Q&&(Q.targetWidget=null,Q.targetPosition=null))}function h(){re>0&&console.info("Editor.js : unbindSelectSection()"),V&&($(".moto-section").removeClass("moto-section_inactive"),$(V).removeClass("moto-section_active").removeAttr("draggable"),$(document).off("keyup",F.section.del),$(document).off("keydown",F.section.keydown),$(V).off("mouseenter",F.widget.mouseEnter).off("mouseleave",F.widget.mouseLeave)),parent.$("body").off("keyup",F.section.del),$(document).off("dragend drop",B),parent.$("body").off("dragenter",F.widget.parentBodyDragEnter),P._$body.off("drop",F.preventDefault).off("dragenter",".moto-widget",F.widget.dragOver).off("dragover",".moto-widget,.moto-section:not(.moto-section_locked)",l).off("dragenter",".moto-section_locked",F.widget.lockedSectionDragEnter).off("mouseleave",c).off("mouseenter",".moto-section_inactive",c).off("dragleave",".moto-section_locked",F.widget.lockedSectionDragLeave),f()}function m(e){return(e=e||V)?(re>2&&console.info("Editor.js : bindWidgets"),re>3&&console.info("Editor.js : bindWidgets : DOM",e),re>3&&console.info("Editor.js : bindWidgets : Set draggable = true for .moto-widget"),e=$(e),U.trigger("NEW EVENT: Editor start bind widgets for section",e),re>3&&console.info("Editor.js : bindWidgets : Bind dom events [click, drag*, mouse*, blur]"),e.on("dragstart",".moto-editor_no-draggable",F.widget.dragPrevent).on("dragstart",".moto-editor_draggable",F.widget.dragStart).on("click",".moto-editor_select-widget-by-id-attribute",F.widget.selectWidgetByIdAttribute).on("click",".moto-editor_remove-closest-widget",F.widget.remove).on("click",".moto-editor_select-closest-widget",F.widget.click).on("click",".moto-editor_duplicate-closest-widget",F.widget.duplicate).on("click",F.widget.click).on("mousedown",F.widget.mouseDown).on("dragstart",F.widget.dragStart).on("mouseenter",".moto-widget",F.widget.mouseEnter).on("mouseleave",".moto-widget",F.widget.mouseLeave),!0):(re>2&&console.info("Editor.js : bindWidgets : Bad DOM"),!1)}function v(e){return(e=e||V)?(re>2&&console.info("Editor.js : unbindWidgets"),re>3&&console.info("Editor.js : unbindWidgets : DOM",e),re>3&&console.info("Editor.js : unbindWidgets : Remove draggable for .moto-widget"),(e=$(e)).find(".moto-widget").removeClass("moto-widget_active").removeAttr("draggable"),U.trigger("NEW EVENT: Editor start unbind widgets for section",e),re>3&&console.info("Editor.js : unbindWidgets : UnBind dom events [click, drag*, mouse*, blur]"),e.off("dragstart",".moto-editor_no-draggable",F.widget.dragPrevent).off("dragstart",".moto-editor_draggable",F.widget.dragStart).off("click",".moto-editor_select-widget-by-id-attribute",F.widget.selectWidgetByIdAttribute).off("click",".moto-editor_remove-closest-widget",F.widget.remove).off("click",".moto-editor_select-closest-widget",F.widget.click).off("click",".moto-editor_duplicate-closest-widget",F.widget.duplicate).off("click",F.widget.click).off("mousedown",F.widget.mouseDown).off("dragstart",".moto-widget",F.widget.dragStart).off("mouseenter",".moto-widget",F.widget.mouseEnter).off("mouseleave",".moto-widget",F.widget.mouseLeave),!0):(re>2&&console.info("Editor.js : unbindWidgets : Bad DOM"),!1)}function _(e){var t,n,i,o;if(!e)return re>2&&console.info("Editor.js : turnOffWidgetsByDOM() : Bad DOM"),!1;if(re>2&&console.info('Editor.js : turnOffWidgetsByDOM : Section ID "'+e.attr("id")+'"'),v(e),t=e.find(".moto-widget"),(i=t.length)>0)for(n=0;n<i;n++)if(o=P.getWidgetByDom(t[n]),angular.isObject(o))try{o.fallAsleep()}catch(e){re>3&&console.error("Editor.js : on widget.fallAsleep"),re>4&&console.error("DUMP.ERROR: ",e),re>4&&console.error("DUMP.Widget: ",o)}return!0}function w(e){return e?(re>1&&console.info("Editor.js : turnOffSection()"),e=$(e),re>2&&console.info('Editor.js : turnOffSection : Section ID "'+e.attr("id")+'"'),e.addClass("moto-section_inactive").removeAttr("draggable"),_(e)):(re>1&&console.info("Editor.js : turnOffSection() : Bad DOM"),!1)}function b(){return $("#top_scroll_page, #bottom_scroll_page")}function y(){(X=$("#"+ne.topId)).length||(X=$('<div id="top_scroll_page">&nbsp;</div>').appendTo("body")),(Y=$("#"+ne.bottomId)).length||(Y=$('<div id="bottom_scroll_page">&nbsp;</div>').appendTo("body")),b().addClass("autoscroll-help-panel"),X.css({top:0}),Y.css({bottom:0})}function E(){var e,t,n,i,o,r=$("html,body");return!!r.is(":animated")||(e=P._$window.scrollTop(),t=$(this).attr("id")===ne.topId?-1:1,n=-1===t?Z:K,i=-1===t?e:$(document).height()-(e+P._$window.height()),J&&J!==t&&(b().show(),J=t),angular.isDefined(n)&&n===i&&i>0?(o=e+40*t,r.animate({scrollTop:o},ne.delay,"linear")):0===i&&(1===t?(Y.hide(),J=1):(X.hide(),J=-1)),-1===t?Z=i:K=i,!0)}function W(){y(),b().on("dragover",E),P._$body.addClass("moto-drag-state"),te.widgetName&&P._$body.addClass("moto-drag-state_widget-"+te.widgetName.replace(/\./g,"-"))}function C(){var e=b();e&&(e.hide(),e.off("dragover",E),X&&X.remove(),Y&&Y.remove()),P._$body.removeClass(function(e,t){return(t.match(/(^|\s)moto-drag-state[^\s]*/g)||[]).join(" ")})}function S(){re>0&&console.info("Editor.js : bindSelectSection()"),V&&($(".moto-section").each(function(e,t){t!==V&&w(t)}),$(V).addClass("moto-section_active").attr("draggable",!0),$(document).on("keyup",F.section.del),$(document).on("keydown",F.section.keydown),$(V).on("mouseenter",F.widget.mouseEnter).on("mouseleave",F.widget.mouseLeave)),parent.$("body").on("keyup",F.section.del)}function I(e){P.getCurrentSection()||r(e),P.getScope().$broadcast("NEW EVENT: Widget was created",e),U.trigger("Editor.Widget.Created",e),e.triggerEvent("newDragEnd")}function O(e){e.onWidthChanged&&e.onWidthChanged(),P.Widgets.massCall(P.Widgets.getNestedWidgetsByWidget(e),{method:"onWidthChanged"}),e.triggerEvent("dragEnd"),P.selectWidget(e),P.HelperSelected.updateByWidget(P.getCurrentWidget()),P.getScope().$broadcast("NEW EVENT: Widget was moved by editor",e)}function D(){var e=P.getHelpers();Q=null,n(),C(),P.HelperDragHover.hideByWidget(A),A=null,P.HelperDragOver.hideByWidget(R),R=null,P.InsertLine.hide(),e.hideInsertHelper(),P.HelperHover.hideByWidget(P.getHelpers().getWidgetWithHoverHelper())}function T(){return Q&&Q.targetPosition&&Q.targetWidget}function H(i,o){t()&&n(),e(i,o),Q={},setTimeout(W,0)}function N(){var e,n;try{if(!T()||!t()||!ie)return void D();if(e=!te.widget,n=k.get(te.widgetName),e&&n&&!n.prototype.isDuplicatableInSection()&&$('.moto-widget[data-widget="'+te.widgetName+'"]',V).length)return U.trigger("Widget.Create.AccessDenied.Duplicate"),void D();if(!(e||te.widget&&o(Q.targetWidget,te.widget)&&Q.targetWidget.getId()!==te.widget.getId()))return void D();P.ContentManager.insertOrMoveWidgetByOptions({targetWidget:Q.targetWidget,droppedWidgetOptions:te,position:Q.targetPosition,callback:function(t){t&&(e?I(t):O(t),P.Widgets.checkAndScrollTo(t))}}),D()}catch(e){i()&&console.error("Error in process of dropping widget",e)}}function B(e){e.preventDefault(),N()}function x(e){e.connectEditor(this),this._Environment=e,this._window=window,this._document=document,this._$body=$("body"),this._$window=$(this._window),this.ContentManager=new MotoEditorContentManager(e),this.Widgets=new MotoEditorWidgetsUtilsClass(e),this.Utils=new MotoEditorUtilsClass(e),this.HelperHover=new HelperHoverClass(e),this.HelperSelected=new HelperSelectedClass(e),this.InsertLine=new InsertLineClass(e),this.HelperHighlight=new HelperHighlightClass(e),this.HelperDragHover=new HelperDragHoverClass(e),this.HelperDragOver=new HelperDragOverClass(e),this.EventsHandler=new MotoEditorEventsHandlerClass(e)}var P,k,M,A,R,j,F,L,U,V,G,z,q,X,Y,Z,K,J,Q,ee=null,te={isNew:null,widgetName:null,widget:null,options:null},ne={topId:"top_scroll_page",bottomId:"bottom_scroll_page",delay:0},ie=!1,oe="production",re=0,ae=!1,se=!1;n(),d._inProgress=!1,x.prototype={_window:null,_document:null,ContentManager:null,Widgets:null,Utils:null,HelperHover:null,HelperSelected:null,InsertLine:null,HelperHighlight:null,HelperDragHover:null,HelperDragOver:null,_Environment:null,_device:{name:"desktop",_isDesktop:!0,_isTablet:!1,_isMobile:!1},_silentMode:!1,_interceptorInstance:null,INTERCEPTOR__PASTE_FROM_BUFFER:"paste_from_buffer.target_widget",INTERCEPTOR__DRAG_OVER_TARGET_WIDGET:"drag_over.target_widget",INTERCEPTOR__INSERT_OR_MOVE_WIDGET_OPTIONS:"insert_or_move_widget.options",INTERCEPTOR__DRAG_OVER_POSITION:"drag_over.position",INTERCEPTOR__PASTE_BUFFER_CLEANING:"paste_from_buffer:cleaning",INTERCEPTOR__PASTE_BUFFER_CLEANED:"paste_from_buffer:cleaned",INTERCEPTOR__BUFFER_IS_ALLOW_TO_PASTE:"paste_from_buffer:is_allow",INTERCEPTOR__IS_ALLOW_DROP_OBJECT:"drop_object:is_allow",INTERCEPTOR__IS_NEED_TO_WRAP_WITH_ROW:"drop_widget:is_need_to_wrap_with_row",INTERCEPTOR__UNDO_REDO_ACTION_BEFORE:"undo_redo_action:before_action",isInterceptorConnected:function(){return!!this._interceptorInstance},_initInterceptor:function(){this.isInterceptorConnected()||(this._interceptorInstance=M.get("coreLibraryInterceptors").createInterceptor())},getInterceptorInstance:function(){return this._interceptorInstance},addInterceptor:function(e,t){return this.isInterceptorConnected()?this.getInterceptorInstance().addInterceptor(t,e):(i()&&console.warn("Editor.addInterceptor : to early try add interceptor",e),!1)},_callInterceptor:function(e,t,n){return this.isInterceptorConnected()?this.getInterceptorInstance().execute(e,t,n):(i()&&console.warn("Editor.callInterceptor : to early try call interceptor",e),t)},getEnvironment:function(){return this._Environment},setScope:function(e){return this._Environment.setScope(e),this},getScope:function(){return this._Environment.getScope()},getContextWindow:function(){return this._Environment._window},isSectionActivated:function(){return se},activateSectionById:function(e){return!(this.isSectionActivated()||!this.isSectionExists(e))&&(V=$("#"+e+".moto-section").get(0),U.trigger("section.edit",e),!0)},isSectionExists:function(e){return 1===$("#"+e+".moto-section").length},getClosestWidgetByDom:function(e){return P.getWidgetByDom(P.Utils.getClosestWidgetElement(e))},getWidgetSectionById:function(e){var t=$("#"+e);return t.length>0?P.getWidgetByDom(t.get(0)):null},getWidgetSectionByWidget:function(e){var t=P.Utils.getClosestSectionElement(e._$dom);return t?P.getWidgetByDom(t):null},getWidgetSections:function(){var e,t=[];return $(".moto-section").each(function(n,i){(e=P.getWidgetByDom(i))&&t.push(e)}),t},getCurrentWidget:function(){return z},selectWidget:function(e,t){var n;angular.isString(e)&&(e=this.getWidgetById(e)),k.isWidget(e)&&this.Widgets.existsById(e.getId())&&(t||(e=e.getWidgetForHelper("selected")),(!(n=this.getCurrentWidget())||n&&e.getId()!==n.getId())&&(n&&(n._$dom.removeClass("moto-widget_selected"),n.triggerEvent("unselected"),n.emitEvent("childUnSelected",n,e)),z=e,e._$dom.addClass("moto-widget_selected"),e.triggerEvent("selected"),this.getScope().$broadcast("NEW EVENT: Widget was selected",e),e.emitEvent("childSelected",e)),P.HelperSelected.hideByWidget(n),P.HelperSelected.showByWidget(e))},getCurrentSection:function(){return q},getHelpers:function(){return Helpers},setHistoryManager:function(e){this.HistoryManager=e},userWantsToRemoveWidget:function(e){var t,n=M.get("$q"),i=n.defer();return!1===(t=e.canBeRemoved())&&i.reject(t),n.when(t).then(function(){!1!==t&&P.destroyWidget(e)?i.resolve(e):i.reject(e)}.bind(this),function(){i.reject(e)}),i.promise},userWantsToDuplicateWidget:function(e){return!!k.isWidget(e)&&(!!e.isCopyable()&&(P.isUnduplicatableWidgetInside(e)?(M.get("coreLibraryMessenger").warning("WIDGET.COMMON.UNDUPLICATABLE_WIDGET_ERROR_MESSAGE"),!1):P.ContentManager.duplicateWidget(e,function(e,t){e?console.warn("Error while duplicate widget:",e):P.Widgets.checkAndScrollTo(t)})))},destroyWidget:function(e){return angular.isString(e)&&(e=this.getWidgetById(e)),!!P.ContentManager.destroyWidget(e)&&((e===z||z&&z.isInside(e))&&(z=null,Helpers.hideHelpers()),z&&P.HelperSelected.updateByWidget(z),P.Widgets.removeCache(e),!0)},hideEmptySectionsPlaceholders:function(e){return this.getWidgetSections().forIn(function(t,n){n.hideEmptySectionPlaceholder(e)}),this},lockAllSection:function(e){return this.getWidgetSections().forIn(function(t,n){n.pleaseLockContent(e)}),this},unlockAllSection:function(e){return this.getWidgetSections().forIn(function(t,n){n.pleaseUnLockContent(e)}),this},lockSectionById:function(e,t){var n,i;if(angular.isArray(e)){for(n=0;n<e.length;n++)this.lockSectionById(e[n],t);return this}return(i=this.getWidgetSectionById(e))?i.pleaseLockContent(t):this},lockSectionByName:function(e,t){var n;if(angular.isArray(e)){for(n=0;n<e.length;n++)this.lockSectionByName(e[n],t);return this}return this.lockSectionById("section-"+e,t)},unlockSectionById:function(e,t){var n,i;if(angular.isArray(e)){for(n=0;n<e.length;n++)this.unlockSectionById(e[n],t);return this}return(i=this.getWidgetSectionById(e))&&i.pleaseUnLockContent(t),this},unlockSectionByName:function(e,t){var n;if(angular.isArray(e)){for(n=0;n<e.length;n++)this.unlockSectionByName(e[n],t);return this}return this.unlockSectionById("section-"+e,t)},getContextDocument:function(){return this._document},setEventManager:function(e){this._Environment.setEventManager(e),this.ContentManager.setEventManager(e),U=e,window&&(window.Helpers=window.Helpers||{},window.Helpers.hideHelpers=function(){P.InsertLine.hide(),Helpers.hover(),P.HelperDragHover.hideByWidget(A),A=null,P.HelperDragOver.hideByWidget(R),R=null},window.Helpers.em=U)},getEventManager:function(){return this._Environment.getEventManager()},_translator:null,setTranslator:function(e){return this._translator=e,this._Environment.setTranslator(e),this},getTranslator:function(){return this._Environment.getTranslator()},translate:function(e){return this._translator?this._translator.instant(e):e},getWidgets:function(){return this.Widgets.getAll()},setDeviceName:function(e){return e&&(this._device.name=e,this._device._isDesktop="desktop"==e,this._device._isTablet="tablet"==e,this._device._isMobile="mobile-v"==e||"mobile-h"==e,window.device=e),this},isSilentMode:function(e){return e&&e._silentMode||this._silentMode},getDeviceName:function(){return this._device.name},isDeviceADesktop:function(){return this._device._isDesktop},isDeviceATablet:function(){return this._device._isTablet},isDeviceAMobile:function(){return this._device._isMobile},updateWidgetsWidth:function(){return setTimeout(function(){P.Widgets.massCall(P.Widgets.getWidgetsWithWidthChanged(),{method:"onWidthChanged"})},700),this},getUnremovableWidgetInside:function(e){function t(e){return e.isRemovable()?(e.children&&e.children.length&&(n=n.concat(e.children)),n.shift(),!!n.length&&t(n[0])):e}var n;{if(e)return n=[e],t(n[0]);i()&&console.error("editor.js : getUnremovableWidgetInside > invalid argument [widget]:",e)}},isUnduplicatableWidgetInside:function(e){function t(e){return!e.isCopyable()||(e.children&&e.children.length&&(n=n.concat(e.children)),n.shift(),!!n.length&&t(n[0]))}var n;{if(e)return n=[e],t(n[0]);i()&&console.error("editor.js : isUnduplicatableWidgetInside > invalid argument [widget]:",e)}},setInjector:function(e){M=e,this.ContentManager.setInjector(M),this._initInterceptor()},setWidgetFactory:function(e){k=e,this._Environment.setWidgetFactory(e),this.ContentManager.setWidgetFactory(e);try{k.setWidgetsCacheOptions(widgetCacheOptions||{}),k.Environment.setEditor(this)}catch(e){}},getWidgetFactory:function(){return k},getCacheOptionsByWidgetId:function(e){var t=window.widgetCacheOptions;if(t)return t[e]},setLivePreviewService:function(e){return this._Environment.setLivePreviewService(e),this},run:function(){var e,t,n;for(re>0&&console.info("\nEditor.js : MotoEditor.run()"),this.HelperHover.run(),this.HelperSelected.run(),this.EventsHandler.run(),this.getScope().$broadcast("NEW EVENT: Editor start running",ee),this.getScope().$on("MotoEvent:LivePreview.DeviceWasChanged",this.updateWidgetsWidth),U.off("NEW EVENTS: this widget will be destroy",a).on("NEW EVENTS: this widget will be destroy",a).off("NEW EVENTS: this widget will be paste",s).on("NEW EVENTS: this widget will be paste",s),g(),re>1&&console.info("Editor.js : MotoEditor.run : bind eventManager.on => signals.*"),U.on("section.edit",L.section.edit).on("widget.new.dragStart",H).on("widget.new.dragEnd",N),re>1&&console.info("Editor.js : MotoEditor.run : create interval helpers"),n=(e=$(".moto-section")).length,re>1&&console.info('Editor.js : MotoEditor.run : light connecting to sections, count is "'+n+'" => bindWidgets(), motoEditor.initializeContainerWidgetByDom()'),t=0;t<n;t++)V=e[t],re>2&&console.info("\nEditor.js : MotoEditor.run : light connecting to section",V.id),m(V),P.initializeWidgetByDom(V);V=null,re>2&&console.info("\n"),re>1&&console.info("Editor.js : MotoEditor.run : add dblclick for .moto-widget"),$(document).on("dblclick",F.widget.doubleClick),this._$body.addClass("moto-preview-mode_content"),this.getScope().$broadcast("NEW EVENT: Editor finish running",ee)},destroy:function(){this.getScope().$broadcast("NEW EVENT: Editor start self destroying",ee),P.HelperHover.destroy(),P.HelperSelected.destroy(),v(),$(document).off("dblclick",F.widget.doubleClick),h(),u(),P.Widgets.massCall(P.getWidgets(),{method:"destroy"}),re>0&&console.info("Editor.js : MotoEditor.destroy()"),re>1&&console.info("Editor.js : MotoEditor.destroy : unbind eventManager.off => signals.*"),U.off("section.edit",L.section.edit).off("widget.new.dragStart",H).off("widget.new.dragEnd",N).off("NEW EVENTS: this widget will be destroy",a).off("NEW EVENTS: this widget will be paste",s),this.getScope().$broadcast("NEW EVENT: Editor self destroyed",ee),this.getScope().$destroy()},edit:function(e){re>1&&console.info("Editor.js : MotoEditor.edit() ",e),F.section.editClick(e)},transform:function(){re>1&&console.info("Editor.js : MotoEditor.transform()")},onBeforeSaveSection:function(e){var t,n;Helpers.hideHelpers(),$(".moto-editor-helper").remove(),P.hideEmptySectionsPlaceholders(!0),re>1&&console.info("Editor.js : Editor.onBeforeSaveSection() : start : Prepare content for saving"),angular.isObject(e)||(e={}),angular.isUndefined(e.useTransform)&&(e.useTransform=!0),z=null,$("body").addClass("moto-preview-overlay moto-preview-overlay_fill-dark"),$(".moto-editor-helper").remove(),n=".moto-widget."+(t=["moto-editor_this_widget_hovered","moto-widget_selected","moto-widget_hover","moto-widget_empty"]).join(", .moto-widget."),re>2&&console.info("Editor.js : Editor.onBeforeSaveSection() : Clean css class : ",t),re>3&&console.info("Editor.js : Editor.onBeforeSaveSection() : Selector : ",n),re>3&&console.info("Editor.js : Editor.onBeforeSaveSection() : Found items for clean : ",$(n).length),$(n).removeClass(t.join(" ")),e.useTransform&&q.exportForSaveAsHtml(),re>1&&console.info("Editor.js : Editor.onBeforeSaveSection() : end")},getHtmlById:function(e){var t;return re>1&&console.info("Editor.js : MotoEditor.getHtmlById()"),(t=$("#"+e).html())&&(t=t.replace(/\<\!----\@/g,"").replace(/\@----\>/g,"")),re>4&&console.info("Editor.js : MotoEditor.getHtmlById => \n",t,"\n"),t},getElementCharacteristics:function(e,t){var n;return t=!!t,n=e.offset(),n.top-=$("body").offset().top,e.hasClass("moto-cell")?n.width=e.width():n.width=e.outerWidth(),n.height=e.outerHeight(t),t&&(n.top-=parseInt(e.css("margin-top").replace("px",""))),n},__getPositionsByEventAndWidget:function(e,t){var n=$(e.originalEvent.target).offset().top,i=$(e.originalEvent.target).offset().left,o=e.originalEvent.offsetY||e.originalEvent.clientY-n+window.pageYOffset,r=e.originalEvent.offsetX||e.originalEvent.clientX-i+window.pageXOffset;return{clientY:e.originalEvent.clientY,clientX:e.originalEvent.clientX,targetWidgetOffsetY:o+(n-t._$dom.offset().top),targetWidgetOffsetX:r+(i-t._$dom.offset().left)}},setEnvironmentStage:function(e){oe=e||oe,this._Environment.setStage(oe)},initializeWidgetByDom:function(e,t){var n;return n=this.ContentManager.getWidgetProcessor("initialize"),n.execute(e,t)},initializeWidgets:function(e,t){var n,i;if(re>2&&console.info("Editor.js : initializeWidgets : Bind dom events [click, drag*, mouse*, blur]"),re>3&&console.info("Editor.js : initializeWidgets : DOM",e),re>3&&console.info("Editor.js : initializeWidgets : parent",t),(e=$(e))&&e.data("widget"))for(n=P.initializeWidgetByDom(e,t),i=0;e.children[i];i++)P.initializeWidgets(e.children[i],n)},getWidgetByDom:function(e){return this.Widgets.getByDom(e)},getWidgetById:function(e){return this.Widgets.getById(e)},getDroppedWidgetOptions:function(){return te},userWantsToPasteWidget:function(e,t){var n,i,o=k.getCurrentPage();e&&(t=(n=(t=t||this.getCurrentWidget()).getTargetDataForPaste(e)).targetWidget,i=n.widgetPosition,t=this._callInterceptor(this.INTERCEPTOR__PASTE_FROM_BUFFER,t,{buffer:e,position:i}),i.widgetId=t.getId(),this.ContentManager.ACL.isAllowToPasteFromBuffer(e,t,o,this.getCurrentSection().getSectionName())&&(e=this.ContentManager.ACL.removeUnpastableWidgetsFromBuffer(e,t,o,this.getCurrentSection().getSectionName()),angular.isObject(e)&&angular.isString(e.name)&&angular.isObject(e.properties)&&this.ContentManager.pasteWidgetFromBuffer(e,i,function(e,t){e||P.Widgets.checkAndScrollTo(t)})))}},L={section:{edit:function(){var e;return re>1&&console.info("Editor.js : signals.section.edit : start"),ae?(re>0&&console.error("Section Activation is already in progress"),!1):se?(re>0&&console.error("Section is already activated"),!1):(q=P.getWidgetByDom(V),ee.setGlobal("__ActivatedSectionWidget__",q),ee.setGlobal("__CurrentSectionWidget__",q),P.getScope().$broadcast("NEW EVENT: Editor start activating section",ee),ae=!0,u(),S(),!1!==G&&(e=G||q,P.HelperHover.hideByWidget(e),P.selectWidget(e)),G=null,P.getScope().$broadcast("NEW EVENT: Editor finished activating section",ee),ae=!1,se=!0,void(re>1&&console.info("Editor.js : signals.section.edit : end")))}}},F={section:{del:function(e){var t,n,i;if(re>4&&console.info("Editor.js : events.section.del"),re>5&&console.info("Editor.js : events.section.del : event",e),(46==e.keyCode||8==e.keyCode)&&z){if(parent.$(".modal").length>0)return;if(1===(n=$(":focus")).length?t=n:1===(i=parent.$(":focus")).length&&(t=i),t&&("INPUT"===t.prop("tagName")||"TEXTAREA"===t.prop("tagName")||"true"===t.prop("contenteditable")))return;P.userWantsToRemoveWidget(z)}},keydown:function(e){var t;if(8===e.keyCode){if((t=$(":focus"))&&("INPUT"===t.prop("tagName")||"TEXTAREA"===t.prop("tagName")||"true"===t.prop("contenteditable")))return;e.preventDefault()}},editClick:function(e){var t,n;re>1&&console.info("Editor.js : events.section.editClick"),re>2&&console.info("Editor.js : events.section.editClick : event",e),"string"==typeof e?(t=$("#"+e).get(0))&&(V=t,n=t.id):(V=e.currentTarget,t=P.Utils.getClosestWidgetElementForDrag(e.target),re>2&&console.info('Editor.js : events.section.editClick : "el" ',t),t&&(G=P.getWidgetByDom(t),re>2&&console.info("Editor.js : events.section.editClick : init edit ",e)),n=V.id),n?(re>1&&console.info('Editor.js : events.section.editClick : trigger "section.edit"',n),U.trigger("section.edit",n)):re>1&&console.info("Editor.js : events.section.editClick : NO SECTION ID")},click:function(e){U.trigger("section.click",V,e),e.preventDefault()}},widget:{mouseEnter:function(e){var t=P.getClosestWidgetByDom(e.target);t&&(t=t.getWidgetForHelper("hover"),e.preventDefault(),z!==t?Helpers.hover(t):Helpers.hover(),t.emitEvent("childHovered",t))},mouseLeave:function(e){var t=P.getClosestWidgetByDom(e.target);t&&(t=t.getWidgetForHelper("hover")).emitEvent("childUnHovered",t),e.preventDefault(),$(document).one("mousemove",".moto-widget,.moto-section:not(.moto-section_inactive)",F.widget.mouseEnter)},mouseDown:function(e){j=P.getClosestWidgetByDom(e.target)},click:function(e){var t;e.preventDefault(),(t=P.getClosestWidgetByDom(e.target))&&j&&t===j&&(P.HelperHover.hideByWidget(P.getHelpers().getWidgetWithHoverHelper()),t.triggerEvent("click",e),U.trigger("widget.click",t,e),P.selectWidget(t)),j=null},duplicate:function(e){var t;if(e.preventDefault(),e.stopPropagation(),!(t=P.getClosestWidgetByDom(e.target)))return!1;P.userWantsToDuplicateWidget(t)},remove:function(e){var t;if(e.preventDefault(),e.stopPropagation(),!(t=P.getClosestWidgetByDom(e.target)))return!1;P.userWantsToRemoveWidget(t)},selectWidgetByIdAttribute:function(e){var t;t=$(e.currentTarget).data("id"),P.selectWidget(t),e.stopPropagation()},doubleClick:function(e){var t=P.getClosestWidgetByDom(e.target);t?(t.triggerEvent("doubleClick",e),e.preventDefault()):(re>2&&console.warn("Editor.js : events.widget.doubleClick : widget not found by event.target"),re>3&&console.warn("Editor.js : events.widget.doubleClick : event",e))},dragPrevent:function(e){return!!te.widgetName||(e.preventDefault(),!1)},dragStart:function(e){var t,n,i;if((n=P.Utils.getClosestWidgetElementForDrag(e.target))&&(t=P.getWidgetByDom(n))&&t.isDraggable(e)){e.originalEvent.dataTransfer.effectAllowed="move",e.originalEvent.dataTransfer.dropEffect="move";try{e.originalEvent.dataTransfer.setData("text",t.name)}catch(e){}i=t.getDragImage(),e.originalEvent.dataTransfer.setDragImage&&i&&e.originalEvent.dataTransfer.setDragImage(i,0,0),H(t)}},dragOver:function(e){var n,i,o,r,a,s;if(e.preventDefault(),t()){if((r=$(e.target))&&((o=r.closest(".moto-widget",V)).length||(o=r.hasClass("moto-section_inactive")?$(".moto-section_active"):r),i=P.getWidgetByDom(o[0]),o&&o.data("widget")&&i)){if((P.getCurrentSection()||P.getWidgetSectionByWidget(i)).isContentLocked())return void f();a=i}if(!a)return;if(p(),a._targetDomElement=r.data("container")&&!r.data("widget")?r[0]:a._dom,a._$targetDomElement=$(a._targetDomElement),n={event:e,droppedWidgetOptions:te,device:device,eventPositions:P.__getPositionsByEventAndWidget(e,a)},a=P._callInterceptor(P.INTERCEPTOR__DRAG_OVER_TARGET_WIDGET,a,n),n.eventPositions=P.__getPositionsByEventAndWidget(e,a),s=a.getHelperInsertPosition(n),s=P._callInterceptor(P.INTERCEPTOR__DRAG_OVER_POSITION,s,n),a&&s&&a===Q.targetWidget&&s===Q.targetPosition)return;Q.targetWidget=a,Q.targetPosition=s,!1,(["prepend","append","cell-left","cell-right"].indexOf(Q.targetPosition)>-1?P.ContentManager.ACL.isAllowDropObject(te,Q.targetWidget,Q.targetPosition):P.ContentManager.ACL.isAllowDropObject(te,Q.targetWidget._parent||Q.targetWidget,Q.targetPosition))&&(P.getHelpers().hideInsertHelper(),["after","before"].indexOf(Q.targetPosition)>-1&&"section"===Q.targetWidget._parent.name||["append","prepend"].indexOf(Q.targetPosition)>-1&&"section"===Q.targetWidget.name?P.InsertLine.showByWidgetAndPosition(Q.targetWidget,Q.targetPosition):(P.InsertLine.hide(),P.getHelpers().showInsertHelper(Q.targetWidget,Q.targetPosition)),P.HelperDragOver.hideByWidget(R),R=null,Q.targetWidget.isContainer()||(R=Q.targetWidget,P.HelperDragOver.showByWidget(R)),P.HelperDragHover.hideByWidget(A),A=["prepend","append","cell-left","cell-right"].indexOf(Q.targetPosition)>-1?Q.targetWidget:Q.targetWidget._parent||Q.targetWidget,A=A.getWidgetForHelper("draghover"),P.HelperDragHover.showByWidget(A))}},parentBodyDragEnter:function(){parent&&parent.$(".modal").length>0||f()},lockedSectionDragEnter:function(e){var t,n;f(),(n=$(e.target))&&(t=n.closest("[data-widget]")).length&&P.getWidgetByDom(t[0])._$dom.addClass("moto-section_locked-drag-over")},lockedSectionDragLeave:function(e){var t,n;(n=$(e.target))&&(t=n.closest("[data-widget]")).length&&P.getWidgetByDom(t[0])._$dom.removeClass("moto-section_locked-drag-over")},elementDragOver:function(e){e.preventDefault()}},preventDefault:function(e){re>2&&console.warn("events.preventDefault"),e.preventDefault()}},window.Helpers=window.Helpers||{},window.device="desktop",(ee=new MotoEditorEnvironmentClass).setGlobal("Helpers",Helpers),P=new x(ee),window.MotoEditorClass=x,$(function(){window.MotoEditor=P})}(),function(){var e;window.Helpers=window.Helpers||{},window.Helpers.hover=function(t){(e||t)&&e!=t&&(e&&(e._$dom.removeClass("moto-widget_hover"),e.isAutoHideHelpers("hover")&&MotoEditor.HelperHover.hideByWidget(e)),t&&(t._$dom.addClass("moto-widget_hover"),t.isAutoShowHelpers("hover")&&MotoEditor.HelperHover.showByWidget(t)),e=t)},window.Helpers.getWidgetWithHoverHelper=function(){return e}}(),function(){function e(e){var t;e&&(t=d._$body.height(),e.top<0?e.top=0:e.top+e.height>t&&(e.top=t-e.height),s.css({width:e.width+"px",height:e.height+"px",top:Math.round(e.top)+"px",left:Math.round(e.left)+"px"}).show())}function t(e,t){var n,i;return i=d.getElementCharacteristics(e._$dom),n="left"===t?i.left:i.left+i.width-l.SMALL_INSERT_HELPER_SIZE,{width:l.SMALL_INSERT_HELPER_SIZE,height:i.height,top:i.top,left:n}}function n(e,t){var n,i,o,r,a=0,s=0;return("row.column"===e.name||"block"===e.name)&&["prepend","append"].indexOf(t)>-1?(n=e._$targetDomElement,s=parseInt(n.css("padding-left").replace("px",""))):n=e._$dom,"accordion.item"===e.name&&(n=e.getTargetElement({position:t})),i="container"===e.name,o=d.getElementCharacteristics(n,i),r=d.getElementCharacteristics(n),"prepend"===t?e.isContainer()&&!e.isTargetElementEmpty({position:t})&&(a=0):"append"===t?e.isContainer()&&!e.isTargetElementEmpty({position:t})&&(a=r.height-l.SMALL_INSERT_HELPER_SIZE):"after"===t&&(a=r.height,a-=l.SMALL_INSERT_HELPER_SIZE),a=r.top+a,s=o.left+s,{width:o.width,height:l.SMALL_INSERT_HELPER_SIZE,top:a,left:s}}function i(t,n){t&&n&&a&&a[n]&&e(a[n].getRenderOptions(t,n))}function o(){try{s&&s.hide()}catch(e){}}function r(e){var t,n=e.name;for(delete e.name,angular.isString(n)&&(n=[n]),a=a||{},t=0;t<n.length;t++)a[n[t]]=e}var a,s,d,l;$(function(){s=$('<div class="helper-insert"></div>'),d=window.MotoEditor,l=d.getHelpers(),d._$body.append(s),l.hideInsertHelper=o,l.showInsertHelper=i,l.addInsertPositions=r,l.SMALL_INSERT_HELPER_SIZE=4,l.MEDIUM_INSERT_HELPER_SIZE=6,l.addInsertPositions({name:["prepend","append","after","before"],getRenderOptions:n}),l.addInsertPositions({name:["left","right"],getRenderOptions:t})})}(),$(function(){var e;(e=$("body")).on("click","a",function(e){e.preventDefault()}),e.removeClass("moto-preview-overlay")}),$(window).one("load",function(){window.parent&&parent.livePreviewLoaded&&parent.livePreviewLoaded()}),function(e,t,n){function o(e,t,n,i){for(var o=[],r=0;r<e.length;r++){var a=e[r];if(a){var s=tinycolor(a),d=s.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";d+=tinycolor.equals(t,a)?" sp-thumb-active":"";var l=s.toString(i||"rgb"),c=v?"background-color:"+s.toRgbString():"filter:"+s.toFilter();o.push('<span title="'+l+'" data-color="'+s.toRgbString()+'" class="'+d+'"><span class="sp-thumb-inner" style="'+c+';" /></span>')}else{o.push('<span title="No Color Selected" data-color="" style="background-color:transparent;" class="sp-clear-display"></span>')}}return"<div class='sp-cf moto-ui-transparent "+n+"'>"+o.join("")+"</div>"}function r(){for(var e=0;e<h.length;e++)h[e]&&h[e].hide()}function a(e,n){var i=t.extend({},f,e);return i.callbacks={move:g(i.move,n),change:g(i.change,n),show:g(i.show,n),hide:g(i.hide,n),beforeShow:g(i.beforeShow,n),cancel:g(i.cancel,n),apply:g(i.apply,n)},i}function s(s,l){function g(){if(L.showPaletteOnly&&(L.showPalette=!0),L.palette){de=L.palette.slice(0),le=t.isArray(de[0])?de:[de],ce={};for(var e=0;e<le.length;e++)for(var n=0;n<le[e].length;n++){var i=tinycolor(le[e][n]).toRgbString();ce[i]=!0}}_e.toggleClass("sp-flat",U),_e.toggleClass("sp-input-disabled",!L.showInput),_e.toggleClass("sp-alpha-enabled",L.showAlpha),_e.toggleClass("sp-clear-enabled",qe),_e.toggleClass("sp-buttons-disabled",!L.showButtons),_e.toggleClass("sp-palette-disabled",!L.showPalette),_e.toggleClass("sp-palette-only",L.showPaletteOnly),_e.toggleClass("sp-initial-disabled",!L.showInitial),_e.addClass(L.className).addClass(L.containerClassName),L.showAlpha&&We.addClass("opacity-color-area"),j()}function f(){if(G&&e.localStorage){try{var n=e.localStorage[G].split(",#");n.length>1&&(delete e.localStorage[G],t.each(n,function(e,t){y(t)}))}catch(e){}try{ge=e.localStorage[G].split(";")}catch(e){}}}function y(n){if(V){var i=tinycolor(n).toRgbString();if(!ce[i]&&-1===t.inArray(i,ge))for(ge.push(i);ge.length>ue;)ge.shift();if(G&&e.localStorage)try{e.localStorage[G]=ge.join(";")}catch(e){}}}function E(){var e=[];if(L.showPalette)for(i=0;i<ge.length;i++){var t=tinycolor(ge[i]).toRgbString();ce[t]||e.push(ge[i])}return e.reverse().slice(0,L.maxSelectionSize)}function W(){var e=P(),n=t.map(le,function(t,n){return o(t,e,"sp-palette-row sp-palette-row-"+n,L.preferredFormat)});f(),ge&&n.push(o(E(),e,"sp-palette-row sp-palette-row-selection",L.preferredFormat)),De.html(n.join(""))}function C(){if(L.showInitial){var e=Le,t=P();Te.html(o([e,t],t,"sp-palette-row-initial",L.preferredFormat))}}function S(){(K<=0||Z<=0||Q<=0)&&j(),_e.addClass(pe),fe=null,me.trigger("dragstart.spectrum",[P()])}function I(){_e.removeClass(pe),me.trigger("dragstop.spectrum",[P()])}function O(){var e=Ie.val();if(null!==e&&""!==e||!qe){var t=tinycolor(e);t.ok?(x(t),L.inputUpdateOriginal?R(!0):(q.move(P()),me.trigger("move.spectrum",[P()]))):Ie.addClass("sp-validation-error")}else x(null),L.inputUpdateOriginal?R(!0):(q.move(P()),me.trigger("move.spectrum",[P()]))}function D(){var e=Oe.val();e=parseInt(e,10),!isNaN(e)&&e>=0&&e<=100?(se=e/100,M()):Oe.addClass("sp-validation-error")}function T(){Y?N():H()}function H(){var n=t.Event("beforeShow.spectrum");Y?j():(me.trigger(n,[P()]),!1===q.beforeShow(P())||n.isDefaultPrevented()||(r(),Y=!0,t(he).bind("click.spectrum",N),t(e).bind("resize.spectrum",X),Ae.addClass("sp-active"),_e.removeClass("sp-hidden"),j(),$(),Le=P(),C(),q.show(Le),me.trigger("show.spectrum",[Le])))}function N(n){n&&"click"==n.type&&2==n.button||(Y=!1,t(he).unbind("click.spectrum",N),t(e).unbind("resize.spectrum",X),Ae.removeClass("sp-active"),_e.addClass("sp-hidden"),!tinycolor.equals(P(),Le)?Ge&&"cancel"!==n?R(!0):B():"cancel"===n&&""===L.color&&B(),q.hide(P()),me.trigger("hide.spectrum",[P()]))}function B(){x(Le,!0),q.cancel(P())}function x(e,t){if(tinycolor.equals(e,P()))$();else{var n,i;!e&&qe?ze=!0:(ze=!1,i=(n=tinycolor(e)).toHsv(),oe=i.h%360/360,re=i.s,ae=i.v,se=i.a),$(),n&&n.ok&&!t&&(Ve=Ue||n.format)}}function P(e){return e=e||{},qe&&ze?null:tinycolor.fromRatio({h:oe,s:re,v:ae,a:Math.round(100*se)/100},{format:e.format||Ve})}function k(){return!Ie.hasClass("sp-validation-error")&&!Oe.hasClass("sp-validation-error")}function M(){$(),q.move(P()),me.trigger("move.spectrum",[P()])}function $(){Ie.removeClass("sp-validation-error"),Oe.removeClass("sp-validation-error"),A();var e=tinycolor.fromRatio({h:oe,s:1,v:1});we.css("background-color",e.toHexString());var t=Ve;se<1&&(0!==se||"name"!==t)&&("hex"!==t&&"hex3"!==t&&"hex6"!==t&&"name"!==t||(t="rgb"));var n=P({format:t}),i="";if(je.removeClass("sp-clear-display"),je.css("background-color","transparent"),!n&&qe)je.addClass("sp-clear-display");else{var o=n.toHexString(),r=n.toRgbString();if(v||1===n.alpha?je.css("background-color",r):(je.css("background-color","transparent"),je.css("filter",n.toFilter())),L.showAlpha){var a=n.toRgb();a.a=0;tinycolor(a).toRgbString()}i=L.showRGBA?n.toString(t):n.toString("hex")}L.showInput&&(Ie.val(i),Oe.val(Math.round(100*n.alpha))),L.showPalette&&W(),C()}function A(){var e=re,t=ae;if(qe&&ze)Se.hide(),Ee.hide(),be.hide();else{Se.show(),Ee.show(),be.show();var n=e*Z,i=K-t*K;n=Math.max(-J,Math.min(Z-J,n-J)),i=Math.max(-J,Math.min(K-J,i-J)),be.css({top:i+"px",left:n+"px"});var o=se*te;Se.css({left:o-ne/2+"px"});var r=oe*Q;Ee.css({top:r-ie+6+"px"})}}function R(e){var t=P(),n="",i=!tinycolor.equals(t,Le);t&&(n=t.toString(Ve),y(t)),ke&&me.val(n),Le=t,e&&i&&(q.change(t),me.trigger("change",[t]))}function j(){var e;Z=we.width(),K=we.height(),J=be.height(),ee=ye.width(),Q=ye.height(),ie=Ee.height(),te=218,ne=Se.width(),U||(_e.css("position","absolute"),e=d(_e,Re),angular.isObject(L.initialOffset)&&(e=angular.extend(e,L.initialOffset)),_e.offset(e)),A(),L.showPalette&&W(),me.trigger("reflow.spectrum")}function F(){N(),ve=!0,me.attr("disabled",!0),Re.addClass("sp-disabled")}var L=a(l,s),U=L.flat,V=L.showSelectionPalette,G=L.localStorageKey,z=L.theme,q=L.callbacks,X=p(j,10),Y=!1,Z=0,K=0,J=0,Q=0,ee=0,te=0,ne=0,ie=0,oe=0,re=0,ae=0,se=1,de=[],le=[],ce={},ge=L.selectionPalette.slice(0),ue=L.maxSelectionSize,pe="sp-dragging",fe=null,he=s.ownerDocument,me=(he.body,t(s)),ve=!1,_e=t(b,he).addClass(z),we=_e.find(".sp-color"),be=_e.find(".sp-dragger"),ye=_e.find(".sp-hue"),Ee=_e.find(".sp-slider"),We=_e.find(".sp-top-inner"),Ce=_e.find(".sp-alpha-inner"),Se=(_e.find(".sp-alpha"),_e.find(".sp-alpha-handle")),Ie=_e.find(".sp-input"),Oe=_e.find(".sp-input-opacity"),De=_e.find(".sp-palette"),Te=_e.find(".sp-initial"),He=_e.find(".sp-cancel"),Ne=_e.find(".sp-clear"),Be=_e.find(".sp-choose"),xe=_e.find(".sp-labels-new"),Pe=_e.find(".sp-labels-current"),ke=me.is("input"),Me=ke&&_&&"color"===me.attr("type"),$e=ke&&!U,Ae=$e?t(w).addClass(z).addClass(L.className).addClass(L.replacerClassName):t([]),Re=$e?Ae:me,je=Ae.find(".sp-preview-inner"),Fe=L.color||ke&&me.val(),Le=!1,Ue=L.preferredFormat,Ve=Ue,Ge=!L.showButtons||L.clickoutFiresChange,ze=!Fe,qe=L.allowEmpty&&!Me;!function(){function e(e){return e.data&&e.data.ignore?(x(t(this).data("color")),M()):(x(t(this).data("color")),M(),R(!0),N()),!1}if(m&&_e.find("*:not(input)").attr("unselectable","on"),g(),$e&&me.after(Ae).hide(),qe||Ne.hide(),U)me.after(_e).hide();else{var n="parent"===L.appendTo?me.parent():t(L.appendTo);1!==n.length&&(n=t("body")),n.append(_e)}f(),Re.bind("click.spectrum touchstart.spectrum",function(e){ve||T(),e.stopPropagation(),t(e.target).is("input")||e.preventDefault()}),(me.is(":disabled")||!0===L.disabled)&&F(),_e.click(c),Ie.change(O),Ie.bind("paste",function(){setTimeout(O,1)}),Ie.keydown(function(e){13==e.keyCode&&O()}),_e.on("mousedown",function(){_e.find("input:focus").each(function(e){t(this).blur()})}),_e.find(".opacity-label").text(L.opacityLabel),Oe.change(D),Oe.bind("paste",function(){setTimeout(D,1)}),Oe.keydown(function(e){13==e.keyCode&&D()}),He.text(L.cancelText),He.attr("title",L.cancelText),He.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),N("cancel")}),Ne.attr("title",L.clearText),Ne.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),ze=!0,M(),U&&R(!0)}),Be.text(L.chooseText),Be.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),k()&&(R(!0),q.apply(P()),N())}),xe.text(L.newText),Pe.text(L.currentText),u(Ce,function(e,t,n){se=e/te,ze=!1,n.shiftKey&&(se=Math.round(10*se)/10),M()},S,I),u(ye,function(e,t){oe=parseFloat(t/Q),ze=!1,L.showAlpha||(se=1),M()},S,I),u(we,function(e,t,n){if(n.shiftKey){if(!fe){var i=re*Z,o=K-ae*K,r=Math.abs(e-i)>Math.abs(t-o);fe=r?"x":"y"}}else fe=null;var a=!fe||"x"===fe,s=!fe||"y"===fe;a&&(re=parseFloat(e/Z)),s&&(ae=parseFloat((K-t)/K)),ze=!1,L.showAlpha||(se=1),M()},S,I),Fe?(x(Fe),$(),Ve=Ue||tinycolor(Fe).format,y(Fe)):$(),U&&H();var i=m?"mousedown.spectrum":"click.spectrum touchstart.spectrum";De.delegate(".sp-thumb-el",i,e),Te.delegate(".sp-thumb-el:nth-child(1)",i,{ignore:!0},e)}();var Xe={show:H,hide:N,toggle:T,reflow:j,option:function(e,i){return e===n?t.extend({},L):i===n?L[e]:(L[e]=i,void g())},enable:function(){ve=!1,me.attr("disabled",!1),Re.removeClass("sp-disabled")},disable:F,set:function(e){x(e),R()},get:P,destroy:function(){me.show(),Re.unbind("click.spectrum touchstart.spectrum"),_e.remove(),Ae.remove(),h[Xe.id]=null},container:_e};return Xe.id=h.push(Xe)-1,Xe}function d(e,n){var i=e.outerWidth(),o=e.outerHeight(),r=n.outerHeight(),a=e[0].ownerDocument,s=a.documentElement,d=s.clientWidth+t(a).scrollLeft(),l=s.clientHeight+t(a).scrollTop(),c=n.offset();return c.left-=Math.min(c.left,c.left+i>d&&d>i?Math.abs(c.left+i-d):0),c.top-=Math.min(c.top,c.top+o>l&&l>o?Math.abs(o+r-0):0),c}function l(){}function c(e){e.stopPropagation()}function g(e,t){var n=Array.prototype.slice,i=n.call(arguments,2);return function(){return e.apply(t,i.concat(n.call(arguments)))}}function u(n,i,o,r){function a(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function s(e){if(c){if(m&&document.documentMode<9&&!e.button)return d();var t=e.originalEvent.touches,o=t?t[0].pageX:e.pageX,r=t?t[0].pageY:e.pageY,s=Math.max(0,Math.min(o-g.left,p)),l=Math.max(0,Math.min(r-g.top,u));f&&a(e),i.apply(n,[s,l,e])}}function d(){c&&(t(l).unbind(h),t(l.body).removeClass("sp-dragging"),r.apply(n,arguments)),c=!1}i=i||function(){},o=o||function(){},r=r||function(){};var l=n.ownerDocument||document,c=!1,g={},u=0,p=0,f="ontouchstart"in e,h={};h.selectstart=a,h.dragstart=a,h["touchmove mousemove"]=s,h["touchend mouseup"]=d,t(n).bind("touchstart mousedown",function(e){var i=e.which?3==e.which:2==e.button;e.originalEvent.touches;i||c||!1!==o.apply(n,arguments)&&(c=!0,u=t(n).height(),p=t(n).width(),g=t(n).offset(),t(l).bind(h),t(l.body).addClass("sp-dragging"),f||s(e),a(e))})}function p(e,t,n){var i;return function(){var o=this,r=arguments;n&&clearTimeout(i),!n&&i||(i=setTimeout(function(){i=null,e.apply(o,r)},t))}}var f={beforeShow:l,move:l,change:l,show:l,hide:l,cancel:l,apply:l,color:!1,flat:!1,showInput:!1,inputUpdateOriginal:!0,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!1,showInitial:!1,showPalette:!1,showPaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",clearText:"Clear Color Selection",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,showHex:!0,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,initialOffset:!1,showRGBA:!1},h=[],m=!!/msie/i.exec(e.navigator.userAgent),v=function(){function e(e,t){return!!~(""+e).indexOf(t)}var t=document.createElement("div").style;return t.cssText="background-color:rgba(0,0,0,.5)",e(t.backgroundColor,"rgba")||e(t.backgroundColor,"hsla")}(),_=function(){var e=t("<input type='color' value='#ffffff' />")[0];return"color"===e.type&&"#ffffff"!==e.value}(),w=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),b=function(){var e="";if(m)for(var t=1;t<=6;t++)e+="<div class='sp-"+t+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",e,"</div>","</div>","<div class='sp-alpha'><label class='opacity-label'>Opacity</label><div class='sp-alpha-inner alpha-inner-slider'><div class='sp-alpha-handle'></div></div>","<div class='sp-input-container sp-input-container-mini sp-cf'>","<input class='sp-input-opacity' type='text' spellcheck='false'  />","<span class='percent'>%</span>","</div>","</div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-labels sp-cf'>","<span class='sp-labels-current'></span>","<span class='sp-labels-new'></span>","</div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();t.fn.spectrum=function(e,n){if("string"==typeof e){var i=this,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=h[t(this).data("spectrum.id")];if(n){var r=n[e];if(!r)throw new Error("Spectrum: no such method: '"+e+"'");"get"==e?i=n.get():"container"==e?i=n.container:"option"==e?i=n.option.apply(n,o):"destroy"==e?(n.destroy(),t(this).removeData("spectrum.id")):r.apply(n,o)}}),i}return this.spectrum("destroy").each(function(){var n=s(this,t.extend({},e,t(this).data()));t(this).data("spectrum.id",n.id)})},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=u,t.fn.spectrum.defaults=f,t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){_||t("input[type=color]").spectrum({preferredFormat:"hex6"})},function(){function t(e,i){if(e=e||"",i=i||{},"object"==typeof e&&e.hasOwnProperty("_tc_id"))return e;var r=n(e),s=r.r,u=r.g,p=r.b,f=r.a,h=S(100*f)/100,m=i.format||r.format;return s<1&&(s=S(s)),u<1&&(u=S(u)),p<1&&(p=S(p)),{ok:r.ok,format:m,_tc_id:W++,alpha:f,getAlpha:function(){return f},setAlpha:function(e){f=c(e),h=S(100*f)/100},toHsv:function(){var e=a(s,u,p);return{h:360*e.h,s:e.s,v:e.v,a:f}},toHsvString:function(){var e=a(s,u,p),t=S(360*e.h),n=S(100*e.s),i=S(100*e.v);return 1==f?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+h+")"},toHsl:function(){var e=o(s,u,p);return{h:360*e.h,s:e.s,l:e.l,a:f}},toHslString:function(){var e=o(s,u,p),t=S(360*e.h),n=S(100*e.s),i=S(100*e.l);return 1==f?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+h+")"},toHex:function(e){return d(s,u,p,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return l(s,u,p,f)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:S(s),g:S(u),b:S(p),a:f}},toRgbString:function(){return 1==f?"rgb("+S(s)+", "+S(u)+", "+S(p)+")":"rgba("+S(s)+", "+S(u)+", "+S(p)+", "+h+")"},toPercentageRgb:function(){return{r:S(100*g(s,255))+"%",g:S(100*g(u,255))+"%",b:S(100*g(p,255))+"%",a:f}},toPercentageRgbString:function(){return 1==f?"rgb("+S(100*g(s,255))+"%, "+S(100*g(u,255))+"%, "+S(100*g(p,255))+"%)":"rgba("+S(100*g(s,255))+"%, "+S(100*g(u,255))+"%, "+S(100*g(p,255))+"%, "+h+")"},toName:function(){return 0===f?"transparent":H[d(s,u,p,!0)]||!1},toFilter:function(e){var n="#"+l(s,u,p,f),o=n,r=i&&i.gradientType?"GradientType = 1, ":"";return e&&(o=t(e).toHex8String()),"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+n+",endColorstr="+o+")"},toString:function(e){var t=!!e;e=e||this.format;var n=!1,i=!t&&f<1&&f>=0&&("hex"===e||"hex6"===e||"hex3"===e||"name"===e);return"rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),i?this.toRgbString():n||this.toHexString()}}}function n(e){var t={r:0,g:0,b:0},n=1,o=!1,a=!1;return"string"==typeof e&&(e=b(e)),"object"==typeof e&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(t=i(e.r,e.g,e.b),o=!0,a="%"===String(e.r).substr(-1)?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=v(e.s),e.v=v(e.v),t=s(e.h,e.s,e.v),o=!0,a="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=v(e.s),e.l=v(e.l),t=r(e.h,e.s,e.l),o=!0,a="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=c(n),{ok:o,format:e.format||a,r:I(255,O(t.r,0)),g:I(255,O(t.g,0)),b:I(255,O(t.b,0)),a:n}}function i(e,t,n){return{r:255*g(e,255),g:255*g(t,255),b:255*g(n,255)}}function o(e,t,n){e=g(e,255),t=g(t,255),n=g(n,255);var i,o,r=O(e,t,n),a=I(e,t,n),s=(r+a)/2;if(r==a)i=o=0;else{var d=r-a;switch(o=s>.5?d/(2-r-a):d/(r+a),r){case e:i=(t-n)/d+(t<n?6:0);break;case t:i=(n-e)/d+2;break;case n:i=(e-t)/d+4}i/=6}return{h:i,s:o,l:s}}function r(e,t,n){function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var o,r,a;if(e=g(e,360),t=g(t,100),n=g(n,100),0===t)o=r=a=n;else{var s=n<.5?n*(1+t):n+t-n*t,d=2*n-s;o=i(d,s,e+1/3),r=i(d,s,e),a=i(d,s,e-1/3)}return{r:255*o,g:255*r,b:255*a}}function a(e,t,n){e=g(e,255),t=g(t,255),n=g(n,255);var i,o,r=O(e,t,n),a=I(e,t,n),s=r,d=r-a;if(o=0===r?0:d/r,r==a)i=0;else{switch(r){case e:i=(t-n)/d+(t<n?6:0);break;case t:i=(n-e)/d+2;break;case n:i=(e-t)/d+4}i/=6}return{h:i,s:o,v:s}}function s(e,t,n){e=6*g(e,360),t=g(t,100),n=g(n,100);var i=C.floor(e),o=e-i,r=n*(1-t),a=n*(1-o*t),s=n*(1-(1-o)*t),d=i%6;return{r:255*[n,a,r,r,s,n][d],g:255*[s,n,n,a,r,r][d],b:255*[r,r,s,n,n,a][d]}}function d(e,t,n,i){var o=[m(S(e).toString(16)),m(S(t).toString(16)),m(S(n).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function l(e,t,n,i){return[m(_(i)),m(S(e).toString(16)),m(S(t).toString(16)),m(S(n).toString(16))].join("")}function c(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function g(e,t){f(e)&&(e="100%");var n=h(e);return e=I(t,O(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),C.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function u(e){return I(1,O(0,e))}function p(e){return parseInt(e,16)}function f(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function h(e){return"string"==typeof e&&-1!=e.indexOf("%")}function m(e){return 1==e.length?"0"+e:""+e}function v(e){return e<=1&&(e=100*e+"%"),e}function _(e){return Math.round(255*parseFloat(e)).toString(16)}function w(e){return p(e)/255}function b(e){e=e.replace(y,"").replace(E,"").toLowerCase();var t=!1;if(T[e])e=T[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=N.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=N.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=N.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=N.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=N.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=N.hex8.exec(e))?{a:w(n[1]),r:p(n[2]),g:p(n[3]),b:p(n[4]),format:t?"name":"hex8"}:(n=N.hex6.exec(e))?{r:p(n[1]),g:p(n[2]),b:p(n[3]),format:t?"name":"hex"}:!!(n=N.hex3.exec(e))&&{r:p(n[1]+""+n[1]),g:p(n[2]+""+n[2]),b:p(n[3]+""+n[3]),format:t?"name":"hex"}}var y=/^[\s,#]+/,E=/\s+$/,W=0,C=Math,S=C.round,I=C.min,O=C.max,D=C.random;t.fromRatio=function(e,n){if("object"==typeof e){var i={};for(var o in e)e.hasOwnProperty(o)&&(i[o]="a"===o?e[o]:v(e[o]));e=i}return t(e,n)},t.equals=function(e,n){return!(!e||!n)&&t(e).toRgbString()==t(n).toRgbString()},t.random=function(){return t.fromRatio({r:D(),g:D(),b:D()})},t.desaturate=function(e,n){n=0===n?0:n||10;var i=t(e).toHsl();return i.s-=n/100,i.s=u(i.s),t(i)},t.saturate=function(e,n){n=0===n?0:n||10;var i=t(e).toHsl();return i.s+=n/100,i.s=u(i.s),t(i)},t.greyscale=function(e){return t.desaturate(e,100)},t.lighten=function(e,n){n=0===n?0:n||10;var i=t(e).toHsl();return i.l+=n/100,i.l=u(i.l),t(i)},t.darken=function(e,n){n=0===n?0:n||10;var i=t(e).toHsl();return i.l-=n/100,i.l=u(i.l),t(i)},t.complement=function(e){var n=t(e).toHsl();return n.h=(n.h+180)%360,t(n)},t.triad=function(e){var n=t(e).toHsl(),i=n.h;return[t(e),t({h:(i+120)%360,s:n.s,l:n.l}),t({h:(i+240)%360,s:n.s,l:n.l})]},t.tetrad=function(e){var n=t(e).toHsl(),i=n.h;return[t(e),t({h:(i+90)%360,s:n.s,l:n.l}),t({h:(i+180)%360,s:n.s,l:n.l}),t({h:(i+270)%360,s:n.s,l:n.l})]},t.splitcomplement=function(e){var n=t(e).toHsl(),i=n.h;return[t(e),t({h:(i+72)%360,s:n.s,l:n.l}),t({h:(i+216)%360,s:n.s,l:n.l})]},t.analogous=function(e,n,i){n=n||6,i=i||30;var o=t(e).toHsl(),r=360/i,a=[t(e)];for(o.h=(o.h-(r*n>>1)+720)%360;--n;)o.h=(o.h+r)%360,a.push(t(o));return a},t.monochromatic=function(e,n){n=n||6;for(var i=t(e).toHsv(),o=i.h,r=i.s,a=i.v,s=[],d=1/n;n--;)s.push(t({h:o,s:r,v:a})),a=(a+d)%1;return s},t.readability=function(e,n){var i=t(e).toRgb(),o=t(n).toRgb(),r=(299*i.r+587*i.g+114*i.b)/1e3,a=(299*o.r+587*o.g+114*o.b)/1e3,s=Math.max(i.r,o.r)-Math.min(i.r,o.r)+Math.max(i.g,o.g)-Math.min(i.g,o.g)+Math.max(i.b,o.b)-Math.min(i.b,o.b);return{brightness:Math.abs(r-a),color:s}},t.readable=function(e,n){var i=t.readability(e,n);return i.brightness>125&&i.color>500},t.mostReadable=function(e,n){for(var i=null,o=0,r=!1,a=0;a<n.length;a++){var s=t.readability(e,n[a]),d=s.brightness>125&&s.color>500,l=s.brightness/125*3+s.color/500;(d&&!r||d&&r&&l>o||!d&&!r&&l>o)&&(r=d,o=l,i=t(n[a]))}return i};var T=t.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},H=t.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(T),N=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();e.tinycolor=t}(),t(function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()})}(window,jQuery);