<?php
namespace Moto; class Exception extends \Exception { protected $_errors = array(); public function __construct($message = '', $code = 0, $errors = null, \Exception $previous = null) { parent::__construct($message, (int) $code, $previous); $this->setErrors($errors); $this->_postConstruct(); } protected function _postConstruct() { } public function setError($name, $value) { $this->_errors[$name] = $value; } public function setErrors($errors) { if (!is_array($errors) && !is_object($errors)) { return false; } foreach ($errors as $key => $value) { $this->setError($key, $value); } return true; } public function getErrors() { return $this->_errors; } public function getData() { return array( 'errors' => $this->getErrors() ); } } 